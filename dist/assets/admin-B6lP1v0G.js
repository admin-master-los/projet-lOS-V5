import{j as s,u as _}from"./query-vendor-6bJJjEwk.js";import{a as v,u as q,c as fe,R as K}from"./react-vendor-WvRYOV97.js";import{A as Z,M as X,L as ge,E as be,a as pe,b as ee,c as te,F as z,d as H,e as xe,P as ye,B as re,f as ne,N as ae,T as we,g as ve}from"./ui-vendor-CUjeC3OF.js";import{c as je}from"./supabase-vendor-Dtf1Bm1F.js";const Me="https://aruoiqvgxoxhdlnerwww.supabase.co",Ce="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFydW9pcXZneG94aGRsbmVyd3d3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMjUxODAsImV4cCI6MjA3NzYwMTE4MH0.iHVOUGmdNsw_cRJIf44MzxErsCxhICKlLHxyO6UUS_8",y=je(Me,Ce),Ir=Object.freeze(Object.defineProperty({__proto__:null,supabase:y},Symbol.toStringTag,{value:"Module"})),Ne=async e=>{try{const{data:t,error:r}=await y.auth.signInWithPassword({email:e.email,password:e.password});return r?(console.error("Erreur de connexion:",r.message),{user:null,session:null,error:new Error(r.message)}):{user:t.user,session:t.session,error:null}}catch(t){return console.error("Erreur inattendue lors de la connexion:",t),{user:null,session:null,error:t}}},Pe=async()=>{try{const{error:e}=await y.auth.signOut();return e?(console.error("Erreur de dÃ©connexion:",e.message),{error:new Error(e.message)}):{error:null}}catch(e){return console.error("Erreur inattendue lors de la dÃ©connexion:",e),{error:e}}},se=async()=>{try{const{data:e,error:t}=await y.auth.getSession();return t?(console.error("Erreur lors de la rÃ©cupÃ©ration de la session:",t.message),null):e.session}catch(e){return console.error("Erreur inattendue lors de la rÃ©cupÃ©ration de la session:",e),null}},ke=async()=>{try{const{data:e,error:t}=await y.auth.getUser();return t?(console.error("Erreur lors de la rÃ©cupÃ©ration de l'utilisateur:",t.message),null):e.user}catch(e){return console.error("Erreur inattendue lors de la rÃ©cupÃ©ration de l'utilisateur:",e),null}},De=async()=>await se()!==null,Se=async e=>{try{const{error:t}=await y.auth.updateUser({password:e});return t?(console.error("Erreur lors du changement de mot de passe:",t.message),{error:new Error(t.message)}):{error:null}}catch(t){return console.error("Erreur inattendue lors du changement de mot de passe:",t),{error:t}}},Oe=async e=>{try{const{error:t}=await y.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/admin/reset-password`});return t?(console.error("Erreur lors de l'envoi de l'email de rÃ©initialisation:",t.message),{error:new Error(t.message)}):{error:null}}catch(t){return console.error("Erreur inattendue lors de la rÃ©initialisation:",t),{error:t}}},k={login:Ne,logout:Pe,getSession:se,getCurrentUser:ke,checkAuth:De,updatePassword:Se,resetPassword:Oe},oe=v.createContext(void 0),Xr=({children:e})=>{const[t,r]=v.useState(null),[n,a]=v.useState(null),[o,i]=v.useState(!0);v.useEffect(()=>{let l;(async()=>{try{l=setTimeout(()=>{console.warn("âš ï¸ Timeout de vÃ©rification de session, arrÃªt du loading"),i(!1)},5e3);const b=await k.getSession();if(a(b),b){const w=await k.getCurrentUser();r(w)}clearTimeout(l)}catch(b){console.error("Erreur lors de l'initialisation de l'auth:",b),clearTimeout(l)}finally{i(!1)}})();const{data:{subscription:d}}=y.auth.onAuthStateChange(async(b,w)=>{if(console.log("ðŸ” Ã‰tat auth changÃ©:",b,w?"Session active":"Pas de session"),a(w),w){const T=await k.getCurrentUser();r(T)}else r(null);i(!1)});return()=>{clearTimeout(l),d.unsubscribe()}},[]);const m={user:t,session:n,loading:o,isAuthenticated:!!n&&!!t,login:async l=>{i(!0);try{const{user:u,session:d,error:b}=await k.login(l);return b?{error:b}:(r(u),a(d),{error:null})}finally{i(!1)}},logout:async()=>{i(!0);try{await k.logout(),r(null),a(null)}catch(l){console.error("Erreur lors de la dÃ©connexion:",l)}finally{i(!1)}},refreshSession:async()=>{try{const l=await k.getSession();if(a(l),l){const u=await k.getCurrentUser();r(u)}}catch(l){console.error("Erreur lors du rafraÃ®chissement de la session:",l)}}};return s.jsx(oe.Provider,{value:m,children:e})},ie=()=>{const e=v.useContext(oe);if(e===void 0)throw new Error("useAuth doit Ãªtre utilisÃ© Ã  l'intÃ©rieur d'un AuthProvider");return e},ce=6048e5,Ee=864e5,Y=43200,J=1440,R=Symbol.for("constructDateFrom");function C(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&R in e?e[R](t):e instanceof Date?new e.constructor(t):new Date(t)}function x(e,t){return C(t||e,e)}let We={};function W(){return We}function E(e,t){const r=W(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=x(e,t?.in),o=a.getDay(),i=(o<n?7:0)+o-n;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function A(e,t){return E(e,{...t,weekStartsOn:1})}function le(e,t){const r=x(e,t?.in),n=r.getFullYear(),a=C(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const o=A(a),i=C(r,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const c=A(i);return r.getTime()>=o.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}function L(e){const t=x(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function $(e,...t){const r=C.bind(null,e||t.find(n=>typeof n=="object"));return t.map(r)}function B(e,t){const r=x(e,t?.in);return r.setHours(0,0,0,0),r}function Te(e,t,r){const[n,a]=$(r?.in,e,t),o=B(n),i=B(a),c=+o-L(o),h=+i-L(i);return Math.round((c-h)/Ee)}function Ye(e,t){const r=le(e,t),n=C(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),A(n)}function F(e,t){const r=+x(e)-+x(t);return r<0?-1:r>0?1:r}function Fe(e){return C(e,Date.now())}function Ae(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Le(e){return!(!Ae(e)&&typeof e!="number"||isNaN(+x(e)))}function _e(e,t,r){const[n,a]=$(r?.in,e,t),o=n.getFullYear()-a.getFullYear(),i=n.getMonth()-a.getMonth();return o*12+i}function qe(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function $e(e,t){return+x(e)-+x(t)}function Ie(e,t){const r=x(e,t?.in);return r.setHours(23,59,59,999),r}function Xe(e,t){const r=x(e,t?.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function ze(e,t){const r=x(e,t?.in);return+Ie(r,t)==+Xe(r,t)}function He(e,t,r){const[n,a,o]=$(r?.in,e,e,t),i=F(a,o),c=Math.abs(_e(a,o));if(c<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-i*c);let h=F(a,o)===-i;ze(n)&&c===1&&F(n,o)===1&&(h=!1);const g=i*(c-+h);return g===0?0:g}function Je(e,t,r){const n=$e(e,t)/1e3;return qe(r?.roundingMethod)(n)}function Re(e,t){const r=x(e,t?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Be={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ve=(e,t,r)=>{let n;const a=Be[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function O(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Qe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ue={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ge={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ke={date:O({formats:Qe,defaultWidth:"full"}),time:O({formats:Ue,defaultWidth:"full"}),dateTime:O({formats:Ge,defaultWidth:"full"})},Ze={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},et=(e,t,r,n)=>Ze[e];function j(e){return(t,r)=>{const n=r?.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,c=r?.width?String(r.width):i;a=e.formattingValues[c]||e.formattingValues[i]}else{const i=e.defaultWidth,c=r?.width?String(r.width):e.defaultWidth;a=e.values[c]||e.values[i]}const o=e.argumentCallback?e.argumentCallback(t):t;return a[o]}}const tt={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},rt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},nt={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},at={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},st={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ot={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},it=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},ct={ordinalNumber:it,era:j({values:tt,defaultWidth:"wide"}),quarter:j({values:rt,defaultWidth:"wide",argumentCallback:e=>e-1}),month:j({values:nt,defaultWidth:"wide"}),day:j({values:at,defaultWidth:"wide"}),dayPeriod:j({values:st,defaultWidth:"wide",formattingValues:ot,defaultFormattingWidth:"wide"})};function M(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;const i=o[0],c=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],h=Array.isArray(c)?ut(c,l=>l.test(i)):lt(c,l=>l.test(i));let g;g=e.valueCallback?e.valueCallback(h):h,g=r.valueCallback?r.valueCallback(g):g;const m=t.slice(i.length);return{value:g,rest:m}}}function lt(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function ut(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function ue(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],o=t.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=r.valueCallback?r.valueCallback(i):i;const c=t.slice(a.length);return{value:i,rest:c}}}const dt=/^(\d+)(th|st|nd|rd)?/i,mt=/\d+/i,ht={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ft={any:[/^b/i,/^(a|c)/i]},gt={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},bt={any:[/1/i,/2/i,/3/i,/4/i]},pt={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},xt={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},yt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},wt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},vt={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},jt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Mt={ordinalNumber:ue({matchPattern:dt,parsePattern:mt,valueCallback:e=>parseInt(e,10)}),era:M({matchPatterns:ht,defaultMatchWidth:"wide",parsePatterns:ft,defaultParseWidth:"any"}),quarter:M({matchPatterns:gt,defaultMatchWidth:"wide",parsePatterns:bt,defaultParseWidth:"any",valueCallback:e=>e+1}),month:M({matchPatterns:pt,defaultMatchWidth:"wide",parsePatterns:xt,defaultParseWidth:"any"}),day:M({matchPatterns:yt,defaultMatchWidth:"wide",parsePatterns:wt,defaultParseWidth:"any"}),dayPeriod:M({matchPatterns:vt,defaultMatchWidth:"any",parsePatterns:jt,defaultParseWidth:"any"})},de={code:"en-US",formatDistance:Ve,formatLong:Ke,formatRelative:et,localize:ct,match:Mt,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ct(e,t){const r=x(e,t?.in);return Te(r,Re(r))+1}function Nt(e,t){const r=x(e,t?.in),n=+A(r)-+Ye(r);return Math.round(n/ce)+1}function me(e,t){const r=x(e,t?.in),n=r.getFullYear(),a=W(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,i=C(t?.in||e,0);i.setFullYear(n+1,0,o),i.setHours(0,0,0,0);const c=E(i,t),h=C(t?.in||e,0);h.setFullYear(n,0,o),h.setHours(0,0,0,0);const g=E(h,t);return+r>=+c?n+1:+r>=+g?n:n-1}function Pt(e,t){const r=W(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=me(e,t),o=C(t?.in||e,0);return o.setFullYear(a,0,n),o.setHours(0,0,0,0),E(o,t)}function kt(e,t){const r=x(e,t?.in),n=+E(r,t)-+Pt(r,t);return Math.round(n/ce)+1}function f(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const P={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return f(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):f(r+1,2)},d(e,t){return f(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return f(e.getHours()%12||12,t.length)},H(e,t){return f(e.getHours(),t.length)},m(e,t){return f(e.getMinutes(),t.length)},s(e,t){return f(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return f(a,t.length)}},S={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},V={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return P.y(e,t)},Y:function(e,t,r,n){const a=me(e,n),o=a>0?a:1-a;if(t==="YY"){const i=o%100;return f(i,2)}return t==="Yo"?r.ordinalNumber(o,{unit:"year"}):f(o,t.length)},R:function(e,t){const r=le(e);return f(r,t.length)},u:function(e,t){const r=e.getFullYear();return f(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return f(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return f(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return P.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return f(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=kt(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):f(a,t.length)},I:function(e,t,r){const n=Nt(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):f(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):P.d(e,t)},D:function(e,t,r){const n=Ct(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):f(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),o=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return f(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),o=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return f(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return f(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=S.noon:n===0?a=S.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=S.evening:n>=12?a=S.afternoon:n>=4?a=S.morning:a=S.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return P.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):P.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):f(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):f(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):P.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):P.s(e,t)},S:function(e,t){return P.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return U(n);case"XXXX":case"XX":return D(n);case"XXXXX":case"XXX":default:return D(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return U(n);case"xxxx":case"xx":return D(n);case"xxxxx":case"xxx":default:return D(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Q(n,":");case"OOOO":default:return"GMT"+D(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Q(n,":");case"zzzz":default:return"GMT"+D(n,":")}},t:function(e,t,r){const n=Math.trunc(+e/1e3);return f(n,t.length)},T:function(e,t,r){return f(+e,t.length)}};function Q(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),o=n%60;return o===0?r+String(a):r+String(a)+t+f(o,2)}function U(e,t){return e%60===0?(e>0?"-":"+")+f(Math.abs(e)/60,2):D(e,t)}function D(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=f(Math.trunc(n/60),2),o=f(n%60,2);return r+a+t+o}const G=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},he=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Dt=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return G(e,t);let o;switch(n){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",G(n,t)).replace("{{time}}",he(a,t))},St={p:he,P:Dt},Ot=/^D+$/,Et=/^Y+$/,Wt=["D","DD","YY","YYYY"];function Tt(e){return Ot.test(e)}function Yt(e){return Et.test(e)}function Ft(e,t,r){const n=At(e,t,r);if(console.warn(n),Wt.includes(e))throw new RangeError(n)}function At(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Lt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_t=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qt=/^'([^]*?)'?$/,$t=/''/g,It=/[a-zA-Z]/;function zr(e,t,r){const n=W(),a=r?.locale??n.locale??de,o=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,c=x(e,r?.in);if(!Le(c))throw new RangeError("Invalid time value");let h=t.match(_t).map(m=>{const l=m[0];if(l==="p"||l==="P"){const u=St[l];return u(m,a.formatLong)}return m}).join("").match(Lt).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const l=m[0];if(l==="'")return{isToken:!1,value:Xt(m)};if(V[l])return{isToken:!0,value:m};if(l.match(It))throw new RangeError("Format string contains an unescaped latin alphabet character `"+l+"`");return{isToken:!1,value:m}});a.localize.preprocessor&&(h=a.localize.preprocessor(c,h));const g={firstWeekContainsDate:o,weekStartsOn:i,locale:a};return h.map(m=>{if(!m.isToken)return m.value;const l=m.value;(!r?.useAdditionalWeekYearTokens&&Yt(l)||!r?.useAdditionalDayOfYearTokens&&Tt(l))&&Ft(l,t,String(e));const u=V[l[0]];return u(c,l,a.localize,g)}).join("")}function Xt(e){const t=e.match(qt);return t?t[1].replace($t,"'"):e}function zt(e,t,r){const n=W(),a=r?.locale??n.locale??de,o=2520,i=F(e,t);if(isNaN(i))throw new RangeError("Invalid time value");const c=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:i}),[h,g]=$(r?.in,...i>0?[t,e]:[e,t]),m=Je(g,h),l=(L(g)-L(h))/1e3,u=Math.round((m-l)/60);let d;if(u<2)return r?.includeSeconds?m<5?a.formatDistance("lessThanXSeconds",5,c):m<10?a.formatDistance("lessThanXSeconds",10,c):m<20?a.formatDistance("lessThanXSeconds",20,c):m<40?a.formatDistance("halfAMinute",0,c):m<60?a.formatDistance("lessThanXMinutes",1,c):a.formatDistance("xMinutes",1,c):u===0?a.formatDistance("lessThanXMinutes",1,c):a.formatDistance("xMinutes",u,c);if(u<45)return a.formatDistance("xMinutes",u,c);if(u<90)return a.formatDistance("aboutXHours",1,c);if(u<J){const b=Math.round(u/60);return a.formatDistance("aboutXHours",b,c)}else{if(u<o)return a.formatDistance("xDays",1,c);if(u<Y){const b=Math.round(u/J);return a.formatDistance("xDays",b,c)}else if(u<Y*2)return d=Math.round(u/Y),a.formatDistance("aboutXMonths",d,c)}if(d=He(g,h),d<12){const b=Math.round(u/Y);return a.formatDistance("xMonths",b,c)}else{const b=d%12,w=Math.trunc(d/12);return b<3?a.formatDistance("aboutXYears",w,c):b<9?a.formatDistance("overXYears",w,c):a.formatDistance("almostXYears",w+1,c)}}function Ht(e,t){return zt(e,Fe(e),t)}const Jt={lessThanXSeconds:{one:"moins dâ€™une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dâ€™une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dâ€™un an",other:"plus de {{count}} ans"},almostXYears:{one:"presquâ€™un an",other:"presque {{count}} ans"}},Rt=(e,t,r)=>{let n;const a=Jt[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",String(t)),r?.addSuffix?r.comparison&&r.comparison>0?"dans "+n:"il y a "+n:n},Bt={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},Vt={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Qt={full:"{{date}} 'Ã ' {{time}}",long:"{{date}} 'Ã ' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ut={date:O({formats:Bt,defaultWidth:"full"}),time:O({formats:Vt,defaultWidth:"full"}),dateTime:O({formats:Qt,defaultWidth:"full"})},Gt={lastWeek:"eeee 'dernier Ã ' p",yesterday:"'hier Ã ' p",today:"'aujourdâ€™hui Ã ' p",tomorrow:"'demain Ã ' p'",nextWeek:"eeee 'prochain Ã ' p",other:"P"},Kt=(e,t,r,n)=>Gt[e],Zt={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant JÃ©sus-Christ","aprÃ¨s JÃ©sus-Christ"]},er={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2Ã¨me trim.","3Ã¨me trim.","4Ã¨me trim."],wide:["1er trimestre","2Ã¨me trimestre","3Ã¨me trimestre","4Ã¨me trimestre"]},tr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fÃ©vr.","mars","avr.","mai","juin","juil.","aoÃ»t","sept.","oct.","nov.","dÃ©c."],wide:["janvier","fÃ©vrier","mars","avril","mai","juin","juillet","aoÃ»t","septembre","octobre","novembre","dÃ©cembre"]},rr={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},nr={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprÃ¨s-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de lâ€™aprÃ¨s-midi",evening:"du soir",night:"du matin"}},ar=(e,t)=>{const r=Number(e),n=t?.unit;if(r===0)return"0";const a=["year","week","hour","minute","second"];let o;return r===1?o=n&&a.includes(n)?"Ã¨re":"er":o="Ã¨me",r+o},sr=["MMM","MMMM"],or={preprocessor:(e,t)=>e.getDate()===1||!t.some(n=>n.isToken&&sr.includes(n.value))?t:t.map(n=>n.isToken&&n.value==="do"?{isToken:!0,value:"d"}:n),ordinalNumber:ar,era:j({values:Zt,defaultWidth:"wide"}),quarter:j({values:er,defaultWidth:"wide",argumentCallback:e=>e-1}),month:j({values:tr,defaultWidth:"wide"}),day:j({values:rr,defaultWidth:"wide"}),dayPeriod:j({values:nr,defaultWidth:"wide"})},ir=/^(\d+)(iÃ¨me|Ã¨re|Ã¨me|er|e)?/i,cr=/\d+/i,lr={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant JÃ©sus-Christ|aprÃ¨s JÃ©sus-Christ)/i},ur={any:[/^av/i,/^ap/i]},dr={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|Ã¨me|e)? trim\.?/i,wide:/^[1234](er|Ã¨me|e)? trimestre/i},mr={any:[/1/i,/2/i,/3/i,/4/i]},hr={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fÃ©vr|mars|avr|mai|juin|juill|juil|aoÃ»t|sept|oct|nov|dÃ©c)\.?/i,wide:/^(janvier|fÃ©vrier|mars|avril|mai|juin|juillet|aoÃ»t|septembre|octobre|novembre|dÃ©cembre)/i},fr={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},gr={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},br={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},pr={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprÃ¨s[-\s]midi|du soir|de la nuit)/i},xr={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},yr={ordinalNumber:ue({matchPattern:ir,parsePattern:cr,valueCallback:e=>parseInt(e)}),era:M({matchPatterns:lr,defaultMatchWidth:"wide",parsePatterns:ur,defaultParseWidth:"any"}),quarter:M({matchPatterns:dr,defaultMatchWidth:"wide",parsePatterns:mr,defaultParseWidth:"any",valueCallback:e=>e+1}),month:M({matchPatterns:hr,defaultMatchWidth:"wide",parsePatterns:fr,defaultParseWidth:"any"}),day:M({matchPatterns:gr,defaultMatchWidth:"wide",parsePatterns:br,defaultParseWidth:"any"}),dayPeriod:M({matchPatterns:pr,defaultMatchWidth:"any",parsePatterns:xr,defaultParseWidth:"any"})},wr={code:"fr",formatDistance:Rt,formatLong:Ut,formatRelative:Kt,localize:or,match:yr,options:{weekStartsOn:1,firstWeekContainsDate:4}},Hr=()=>{const e=q(),t=fe(),{login:r,isAuthenticated:n}=ie(),[a,o]=v.useState({email:"",password:""}),[i,c]=v.useState(!1),[h,g]=v.useState({}),[m,l]=v.useState(!1),[u,d]=v.useState(null);K.useEffect(()=>{if(n){const p=t.state?.from?.pathname||"/admin/dashboard";e(p,{replace:!0})}},[n,e,t]);const b=()=>{const p={};return a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(p.email="Format d'email invalide"):p.email="L'email est requis",a.password?a.password.length<6&&(p.password="Le mot de passe doit contenir au moins 6 caractÃ¨res"):p.password="Le mot de passe est requis",g(p),Object.keys(p).length===0},w=async p=>{if(p.preventDefault(),d(null),!!b()){l(!0);try{const{error:N}=await r({email:a.email.trim().toLowerCase(),password:a.password});if(N){N.message.includes("Invalid login credentials")?d("Email ou mot de passe incorrect"):N.message.includes("Email not confirmed")?d("Veuillez confirmer votre email avant de vous connecter"):d(N.message);return}}catch(N){console.error("Erreur lors de la connexion:",N),d("Une erreur inattendue est survenue. Veuillez rÃ©essayer.")}finally{l(!1)}}},T=(p,N)=>{o(I=>({...I,[p]:N})),h[p]&&g(I=>({...I,[p]:void 0})),u&&d(null)};return s.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-[#0A0A0B] px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-cyan-500/10 rounded-full blur-3xl animate-pulse"}),s.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),s.jsxs("div",{className:"max-w-md w-full relative z-10",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-cyan-500 to-purple-500 rounded-2xl mb-6 shadow-lg shadow-cyan-500/25",children:s.jsx("span",{className:"text-2xl font-bold text-white",children:"lOS"})}),s.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent mb-2",children:"Administration"}),s.jsx("p",{className:"text-gray-400",children:"Connectez-vous pour accÃ©der au panneau d'administration"})]}),s.jsxs("div",{className:"bg-white/5 backdrop-blur-lg border border-gray-700/50 rounded-2xl p-8 shadow-xl",children:[u&&s.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/50 rounded-xl flex items-start gap-3",children:[s.jsx(Z,{size:20,className:"text-red-400 flex-shrink-0 mt-0.5"}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"text-red-400 text-sm font-medium",children:u})})]}),s.jsxs("form",{onSubmit:w,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(X,{size:20,className:"text-gray-400"})}),s.jsx("input",{id:"email",type:"email",value:a.email,onChange:p=>T("email",p.target.value),className:`block w-full pl-10 pr-3 py-3 bg-white/5 border ${h.email?"border-red-500":"border-gray-600"} rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-300`,placeholder:"admin@example.com",disabled:m})]}),h.email&&s.jsxs("p",{className:"mt-2 text-sm text-red-400 flex items-center gap-1",children:[s.jsx("span",{className:"inline-block w-1 h-1 bg-red-400 rounded-full"}),h.email]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(ge,{size:20,className:"text-gray-400"})}),s.jsx("input",{id:"password",type:i?"text":"password",value:a.password,onChange:p=>T("password",p.target.value),className:`block w-full pl-10 pr-12 py-3 bg-white/5 border ${h.password?"border-red-500":"border-gray-600"} rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-300`,placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",disabled:m}),s.jsx("button",{type:"button",onClick:()=>c(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-cyan-400 transition-colors",disabled:m,children:i?s.jsx(be,{size:20}):s.jsx(pe,{size:20})})]}),h.password&&s.jsxs("p",{className:"mt-2 text-sm text-red-400 flex items-center gap-1",children:[s.jsx("span",{className:"inline-block w-1 h-1 bg-red-400 rounded-full"}),h.password]})]}),s.jsx("button",{type:"submit",disabled:m,className:`w-full flex items-center justify-center gap-3 py-3 px-4 rounded-xl font-semibold text-white transition-all duration-300 ${m?"bg-gray-600 cursor-not-allowed":"bg-gradient-to-r from-cyan-500 to-purple-500 hover:shadow-lg hover:shadow-cyan-500/25 hover:scale-105"}`,children:m?s.jsxs(s.Fragment,{children:[s.jsx(ee,{size:20,className:"animate-spin"}),"Connexion en cours..."]}):"Se connecter"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("p",{className:"text-gray-500 text-sm",children:"Interface d'administration sÃ©curisÃ©e"})})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("button",{onClick:()=>e("/"),className:"text-gray-400 hover:text-cyan-400 transition-colors text-sm",children:"â† Retour au site"})})]})]})},vr=async()=>{try{const e=async l=>{try{const{count:u,error:d}=await y.from(l).select("id",{count:"exact",head:!0});return d?(console.warn(`Table '${l}' n'existe pas encore:`,d.message),0):u||0}catch(u){return console.warn(`Erreur lors du comptage de '${l}':`,u),0}},[t,r,n,a,o,i,c,h,g,m]=await Promise.all([e("contact"),e("projects"),e("blog_posts"),e("services"),e("sectors"),e("navigation"),e("skills"),e("chatbot_knowledge"),e("blog_comments"),(async()=>{try{const{count:l,error:u}=await y.from("blog_comments").select("id",{count:"exact",head:!0}).eq("status","pending");return u?0:l||0}catch{return 0}})()]);return{contactsCount:t,projectsCount:r,blogPostsCount:n,servicesCount:a,sectorsCount:o,navigationItemsCount:i,skillsCount:c,chatbotKnowledgeCount:h,commentsCount:g,pendingCommentsCount:m}}catch(e){return console.error("Erreur lors de la rÃ©cupÃ©ration des statistiques:",e),{contactsCount:0,projectsCount:0,blogPostsCount:0,servicesCount:0,sectorsCount:0,navigationItemsCount:0,skillsCount:0,chatbotKnowledgeCount:0,commentsCount:0,pendingCommentsCount:0}}},jr=async(e=5)=>{try{const{data:t,error:r}=await y.from("contact").select("id, name, email, created_at").order("created_at",{ascending:!1}).limit(e);if(r)throw r;return t||[]}catch(t){return console.error("Erreur lors de la rÃ©cupÃ©ration des contacts rÃ©cents:",t),[]}},Mr=async(e=5)=>{try{const{data:t,error:r}=await y.from("projects").select("id, title, status, created_at").order("created_at",{ascending:!1}).limit(e);if(r)throw r;return t||[]}catch(t){return console.error("Erreur lors de la rÃ©cupÃ©ration des projets rÃ©cents:",t),[]}},Cr=async(e=5)=>{try{const{data:t,error:r}=await y.from("blog_posts").select("id, title, status, published_at, created_at").order("created_at",{ascending:!1}).limit(e);if(r)throw r;return t||[]}catch(t){return console.error("Erreur lors de la rÃ©cupÃ©ration des articles rÃ©cents:",t),[]}},Nr=()=>_({queryKey:["dashboard","stats"],queryFn:vr,staleTime:1e3*60*5,refetchOnWindowFocus:!0}),Pr=(e=5)=>_({queryKey:["dashboard","recent-contacts",e],queryFn:()=>jr(e),staleTime:1e3*60*2}),kr=(e=5)=>_({queryKey:["dashboard","recent-projects",e],queryFn:()=>Mr(e),staleTime:1e3*60*2,enabled:!1}),Dr=(e=5)=>_({queryKey:["dashboard","recent-blog-posts",e],queryFn:()=>Cr(e),staleTime:1e3*60*2,enabled:!1}),Sr=({label:e,value:t,icon:r,color:n,bgColor:a,borderColor:o,trend:i,link:c,isLoading:h=!1})=>{const g=q(),m=()=>{c&&g(c)};return s.jsx("div",{onClick:m,className:`
        bg-white/5 border ${o} rounded-xl p-6 
        transition-all duration-300
        ${c?"cursor-pointer hover:scale-105 hover:shadow-lg hover:shadow-cyan-500/10":""}
      `,children:h?s.jsxs("div",{className:"animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:`w-12 h-12 ${a} rounded-lg`}),s.jsx("div",{className:"w-8 h-4 bg-gray-700 rounded"})]}),s.jsx("div",{className:"w-16 h-8 bg-gray-700 rounded mb-2"}),s.jsx("div",{className:"w-24 h-4 bg-gray-700 rounded"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:`w-12 h-12 ${a} rounded-lg flex items-center justify-center`,children:s.jsx(r,{size:24,className:"text-white"})}),i&&s.jsxs("div",{className:`flex items-center gap-1 text-sm font-medium ${i.isPositive?"text-green-400":"text-red-400"}`,children:[s.jsx("span",{children:i.isPositive?"â†‘":"â†“"}),s.jsxs("span",{children:[Math.abs(i.value),"%"]})]})]}),s.jsx("p",{className:"text-3xl font-bold text-white mb-1",children:typeof t=="number"?t.toLocaleString("fr-FR"):t}),s.jsx("p",{className:"text-sm text-gray-400",children:e})]})})},Or={contact:{icon:X,color:"text-cyan-400",bgColor:"bg-cyan-500/10",borderColor:"border-cyan-500/30"},project:{icon:H,color:"text-purple-400",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/30"},blog:{icon:z,color:"text-green-400",bgColor:"bg-green-500/10",borderColor:"border-green-500/30"},comment:{icon:te,color:"text-yellow-400",bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/30"}},Er=({items:e,isLoading:t=!1})=>{const r=q();return t?s.jsxs("div",{className:"bg-white/5 border border-gray-700/50 rounded-xl p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"ActivitÃ© rÃ©cente"}),s.jsx("div",{className:"space-y-4",children:[...Array(5)].map((n,a)=>s.jsxs("div",{className:"animate-pulse flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-lg"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"w-32 h-4 bg-gray-700 rounded mb-2"}),s.jsx("div",{className:"w-48 h-3 bg-gray-700 rounded"})]})]},a))})]}):e.length===0?s.jsxs("div",{className:"bg-white/5 border border-gray-700/50 rounded-xl p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"ActivitÃ© rÃ©cente"}),s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-400",children:"Aucune activitÃ© rÃ©cente"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Les derniÃ¨res modifications apparaÃ®tront ici"})]})]}):s.jsxs("div",{className:"bg-white/5 border border-gray-700/50 rounded-xl p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"ActivitÃ© rÃ©cente"}),s.jsx("div",{className:"space-y-3",children:e.map(n=>{const a=Or[n.type],o=a.icon;return s.jsxs("div",{onClick:()=>r(n.link),className:`
                flex items-center gap-4 p-3 rounded-lg border ${a.borderColor}
                ${a.bgColor} cursor-pointer hover:scale-[1.02] transition-all
              `,children:[s.jsx("div",{className:`flex-shrink-0 w-10 h-10 ${a.bgColor} rounded-lg flex items-center justify-center`,children:s.jsx(o,{size:20,className:a.color})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-white font-medium truncate",children:n.title}),n.subtitle&&s.jsx("p",{className:"text-sm text-gray-400 truncate",children:n.subtitle}),s.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:Ht(new Date(n.timestamp),{addSuffix:!0,locale:wr})})]}),s.jsx(xe,{size:16,className:"text-gray-500 flex-shrink-0"})]},n.id)})})]})},Wr=[{label:"Nouvel article",icon:z,link:"/admin/blog/create",color:"from-green-500 to-emerald-500",description:"RÃ©diger un article de blog"},{label:"Nouveau projet",icon:H,link:"/admin/projects/create",color:"from-purple-500 to-pink-500",description:"Ajouter un projet portfolio"},{label:"Nouveau service",icon:re,link:"/admin/services/create",color:"from-cyan-500 to-blue-500",description:"CrÃ©er un service"},{label:"Nouveau secteur",icon:ne,link:"/admin/sectors/create",color:"from-orange-500 to-red-500",description:"Ajouter un secteur"},{label:"Navigation",icon:ae,link:"/admin/navigation/create",color:"from-yellow-500 to-amber-500",description:"Ajouter un lien de navigation"}],Tr=()=>{const e=q();return s.jsxs("div",{className:"bg-white/5 border border-gray-700/50 rounded-xl p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[s.jsx(ye,{size:20,className:"text-cyan-400"}),"Actions rapides"]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3",children:Wr.map((t,r)=>{const n=t.icon;return s.jsx("button",{onClick:()=>e(t.link),className:`
                p-4 rounded-xl border border-gray-700/50 
                bg-gradient-to-br ${t.color} bg-opacity-10
                hover:scale-105 transition-all duration-300
                text-left group
              `,children:s.jsxs("div",{className:"flex flex-col items-start gap-2",children:[s.jsx("div",{className:"w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center group-hover:bg-white/20 transition-colors",children:s.jsx(n,{size:20,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-medium text-sm",children:t.label}),s.jsx("p",{className:"text-gray-400 text-xs mt-0.5",children:t.description})]})]})},r)})})]})},Yr={sm:24,md:40,lg:56},Fr=({size:e="md",text:t})=>s.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[s.jsx(ee,{size:Yr[e],className:"animate-spin text-cyan-400"}),t&&s.jsx("p",{className:"text-gray-400 text-sm",children:t})]}),Ar=({title:e="Une erreur est survenue",message:t,onRetry:r})=>s.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 rounded-xl p-6 text-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-red-500/20 rounded-full mb-4",children:s.jsx(Z,{size:24,className:"text-red-400"})}),s.jsx("h3",{className:"text-lg font-semibold text-red-400 mb-2",children:e}),s.jsx("p",{className:"text-gray-300 mb-4",children:t}),r&&s.jsx("button",{onClick:r,className:"px-4 py-2 bg-red-500/20 border border-red-500/50 rounded-lg text-red-400 hover:bg-red-500/30 transition-colors",children:"RÃ©essayer"})]}),Jr=()=>{const{user:e}=ie(),{data:t,isLoading:r,error:n}=Nr(),{data:a,isLoading:o}=Pr(3),{data:i,isLoading:c}=kr(3),{data:h,isLoading:g}=Dr(3),m=K.useMemo(()=>{const u=[];return a&&a.forEach(d=>{u.push({id:d.id,type:"contact",title:d.name,subtitle:d.email,timestamp:d.created_at,link:"/admin/contacts"})}),i&&i.forEach(d=>{u.push({id:d.id,type:"project",title:d.title,subtitle:`Statut: ${d.status}`,timestamp:d.created_at,link:"/admin/projects"})}),h&&h.forEach(d=>{u.push({id:d.id,type:"blog",title:d.title,subtitle:`Statut: ${d.status}`,timestamp:d.published_at||d.created_at,link:"/admin/blog"})}),u.sort((d,b)=>new Date(b.timestamp).getTime()-new Date(d.timestamp).getTime()).slice(0,5)},[a,i,h]),l=t?[{label:"Contacts",value:t.contactsCount,icon:X,color:"from-cyan-500 to-blue-500",bgColor:"bg-cyan-500/10",borderColor:"border-cyan-500/50",link:"/admin/contacts"},{label:"Projets",value:t.projectsCount,icon:H,color:"from-purple-500 to-pink-500",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/50",link:"/admin/projects"},{label:"Articles",value:t.blogPostsCount,icon:z,color:"from-green-500 to-emerald-500",bgColor:"bg-green-500/10",borderColor:"border-green-500/50",link:"/admin/blog"},{label:"Commentaires",value:t.commentsCount,badge:t.pendingCommentsCount>0?t.pendingCommentsCount:void 0,icon:te,color:"from-yellow-500 to-orange-500",bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/50",link:"/admin/comments"},{label:"Services",value:t.servicesCount,icon:re,color:"from-orange-500 to-red-500",bgColor:"bg-orange-500/10",borderColor:"border-orange-500/50",link:"/admin/services"},{label:"Secteurs",value:t.sectorsCount,icon:ne,color:"from-pink-500 to-rose-500",bgColor:"bg-pink-500/10",borderColor:"border-pink-500/50",link:"/admin/sectors"},{label:"Navigation",value:t.navigationItemsCount,icon:ae,color:"from-yellow-500 to-amber-500",bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/50",link:"/admin/navigation"},{label:"CompÃ©tences",value:t.skillsCount,icon:we,color:"from-indigo-500 to-purple-500",bgColor:"bg-indigo-500/10",borderColor:"border-indigo-500/50",link:"/admin/skills"},{label:"Chatbot KB",value:t.chatbotKnowledgeCount,icon:ve,color:"from-teal-500 to-cyan-500",bgColor:"bg-teal-500/10",borderColor:"border-teal-500/50",link:"/admin/chatbot"}]:[];return n?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent mb-2",children:"Dashboard"}),s.jsxs("p",{className:"text-gray-400",children:["Bienvenue, ",e?.email?.split("@")[0]||"Admin"]})]}),s.jsx(Ar,{title:"Erreur de chargement",message:"Impossible de charger les statistiques. VÃ©rifiez votre connexion."})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent mb-2",children:"Dashboard"}),s.jsxs("p",{className:"text-gray-400",children:["Bienvenue, ",e?.email?.split("@")[0]||"Admin"," ! Voici un aperÃ§u de votre activitÃ©."]})]}),r?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(Fr,{size:"lg",text:"Chargement des statistiques..."})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:l.map((u,d)=>s.jsx(Sr,{...u},d))}),s.jsx(Tr,{}),s.jsx(Er,{items:m,isLoading:o||c||g}),t&&t.contactsCount===0&&t.projectsCount===0&&t.blogPostsCount===0&&s.jsx("div",{className:"bg-blue-500/10 border border-blue-500/50 rounded-xl p-6",children:s.jsx("div",{className:"flex items-start gap-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-blue-400 font-semibold mb-2",children:"ðŸŽ‰ Bienvenue dans votre interface admin !"}),s.jsx("p",{className:"text-gray-300 text-sm mb-3",children:"Votre dashboard est prÃªt. Commencez par crÃ©er du contenu en utilisant les actions rapides ci-dessus ou en naviguant dans le menu."}),s.jsxs("ul",{className:"text-gray-400 text-sm space-y-1",children:[s.jsx("li",{children:"â†’ CrÃ©ez vos premiers services"}),s.jsx("li",{children:"â†’ Ajoutez des projets Ã  votre portfolio"}),s.jsx("li",{children:"â†’ RÃ©digez des articles de blog"}),s.jsx("li",{children:"â†’ Configurez la navigation"})]})]})})})]})};export{Xr as A,Jr as D,Ar as E,Fr as L,wr as a,zr as b,Hr as c,Ir as d,Ht as f,y as s,ie as u};

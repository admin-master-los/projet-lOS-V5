import{j as e,u as B,b as P,a as L}from"./query-vendor-6bJJjEwk.js";import{a as v,L as z,d as Ee,u as ke}from"./react-vendor-WvRYOV97.js";import{I as Y,J as Te,K as Z,X as V,O as Pe,F as H,Q as Le,P as ue,C as F,A as R,x as Ie,S as Be,R as qe,a as pe,o as De,r as Oe,n as ze,V as E,W as Fe,u as Re,Y as Ae,Z as Me,s as Ue}from"./ui-vendor-CUjeC3OF.js";import{s as N}from"./admin-B6lP1v0G.js";const q="portfolio-images",Ke=5,ge=.85,me=1920,ee=["image/jpeg","image/jpg","image/png","image/webp","image/gif"],he=(t,r=Ke)=>{if(!ee.includes(t.type))return{valid:!1,error:`Type de fichier non support√©. Utilisez : ${ee.join(", ")}`};const s=r*1024*1024;return t.size>s?{valid:!1,error:`Fichier trop volumineux. Maximum : ${r}MB`}:{valid:!0}},fe=t=>{const r=Date.now(),s=Math.random().toString(36).substring(2,9),a=t.split(".").pop()?.toLowerCase()||"jpg";return`${t.split(".").slice(0,-1).join(".").toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").substring(0,30)}-${r}-${s}.${a}`},$e=async(t,r=me,s=ge)=>new Promise((a,i)=>{const d=new FileReader;d.onload=n=>{const c=new Image;c.onload=()=>{let u=c.width,m=c.height;u>r&&(m=m*r/u,u=r);const h=document.createElement("canvas");h.width=u,h.height=m;const f=h.getContext("2d");if(!f){i(new Error("Impossible de cr√©er le contexte canvas"));return}f.drawImage(c,0,0,u,m),h.toBlob(b=>{b?a(b):i(new Error("√âchec de la compression"))},t.type==="image/png"?"image/png":"image/jpeg",s)},c.onerror=()=>i(new Error("Erreur lors du chargement de l'image")),c.src=n.target?.result},d.onerror=()=>i(new Error("Erreur lors de la lecture du fichier")),d.readAsDataURL(t)}),xe=async(t,r)=>{try{const s=he(t,r.maxSizeMB);if(!s.valid)return{success:!1,error:s.error};console.log("üñºÔ∏è Compression de l'image...");const a=await $e(t,r.maxWidthPx||me,r.quality||ge),i=new File([a],t.name,{type:t.type});console.log(`üìä Taille originale: ${(t.size/1024).toFixed(2)}KB`),console.log(`üìä Taille compress√©e: ${(i.size/1024).toFixed(2)}KB`),console.log(`üìä R√©duction: ${((t.size-i.size)/t.size*100).toFixed(1)}%`);const d=fe(t.name),n=`${r.folder}/${d}`;console.log(`üì§ Upload vers: ${q}/${n}`);const{data:c,error:u}=await N.storage.from(q).upload(n,i,{cacheControl:"3600",upsert:!1});if(u)return console.error("‚ùå Erreur upload:",u),{success:!1,error:u.message};const{data:m}=N.storage.from(q).getPublicUrl(n);return console.log("‚úÖ Upload r√©ussi!"),console.log("üîó URL publique:",m.publicUrl),{success:!0,publicUrl:m.publicUrl,filePath:n}}catch(s){return console.error("‚ùå Erreur lors de l'upload:",s),{success:!1,error:s.message||"Erreur inconnue lors de l'upload"}}},be=async t=>{try{console.log(`üóëÔ∏è Suppression de: ${q}/${t}`);const{error:r}=await N.storage.from(q).remove([t]);return r?(console.error("‚ùå Erreur suppression:",r),!1):(console.log("‚úÖ Image supprim√©e avec succ√®s"),!0)}catch(r){return console.error("‚ùå Erreur lors de la suppression:",r),!1}},ye=t=>{try{const r=t.match(/\/portfolio-images\/(.+)$/);return r?r[1]:null}catch(r){return console.error("Erreur lors de l'extraction du chemin:",r),null}},Ve=async(t,r,s)=>{try{const a=await xe(t,s);if(!a.success)return a;if(r){const i=ye(r);i&&await be(i)}return a}catch(a){return{success:!1,error:a.message||"Erreur lors du remplacement de l'image"}}},He={upload:xe,delete:be,replace:Ve,validate:he,extractFilePath:ye,generateFileName:fe},We=({value:t,onChange:r,folder:s,label:a="Image",helpText:i,required:d=!1,uploadOptions:n={},previewHeight:c="h-48"})=>{const[u,m]=v.useState(!1),[h,f]=v.useState(!1),[b,y]=v.useState(0),[l,x]=v.useState(null),[_,k]=v.useState(!1),T=v.useRef(null),g=async C=>{try{x(null),f(!0),y(0),k(!1);const S=setInterval(()=>{y(X=>X>=90?(clearInterval(S),90):X+10)},200),Se={folder:s,maxSizeMB:5,quality:.85,maxWidthPx:1920,...n},D=await He.replace(C,t||null,Se);if(clearInterval(S),D.success&&D.publicUrl)y(100),k(!0),r(D.publicUrl),setTimeout(()=>{k(!1),f(!1),y(0)},2e3);else throw new Error(D.error||"Erreur lors de l'upload")}catch(S){console.error("Erreur upload:",S),x(S.message||"Erreur lors de l'upload de l'image"),f(!1),y(0)}},p=C=>{const S=C.target.files?.[0];S&&g(S)},j=C=>{C.preventDefault(),m(!0)},w=C=>{C.preventDefault(),m(!1)},O=C=>{C.preventDefault(),m(!1);const S=C.dataTransfer.files[0];S&&(S.type.startsWith("image/")?g(S):x("Le fichier doit √™tre une image"))},J=()=>{T.current?.click()},Ce=async C=>{C.stopPropagation(),window.confirm("√ätes-vous s√ªr de vouloir supprimer cette image ?")&&(r(""),x(null))};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300",children:[a,d&&e.jsx("span",{className:"text-red-400 ml-1",children:"*"}),i&&e.jsx("span",{className:"text-xs text-gray-500 ml-2 font-normal",children:i})]}),e.jsxs("div",{onClick:!t&&!h?J:void 0,onDragOver:j,onDragLeave:w,onDrop:O,className:`
          relative rounded-lg border-2 border-dashed transition-all cursor-pointer
          ${c}
          ${u?"border-pink-500 bg-pink-500/10":t?"border-gray-600":"border-gray-600 hover:border-pink-500/50 bg-gray-700/30"}
          ${h?"pointer-events-none":""}
        `,children:[e.jsx("input",{ref:T,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",onChange:p,className:"hidden"}),!t&&!h&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-4 text-center",children:[e.jsx(Y,{className:"w-12 h-12 text-gray-400 mb-3"}),e.jsx("p",{className:"text-sm text-gray-300 font-medium mb-1",children:"Glissez une image ici ou cliquez pour s√©lectionner"}),e.jsx("p",{className:"text-xs text-gray-500",children:"JPG, PNG, WebP, GIF (max. 5MB)"})]}),h&&e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-4 bg-gray-900/80 backdrop-blur-sm",children:_?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center mb-3",children:e.jsx(Z,{className:"w-7 h-7 text-white"})}),e.jsx("p",{className:"text-sm text-green-400 font-medium",children:"Upload r√©ussi !"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"w-12 h-12 text-pink-500 animate-spin mb-3"}),e.jsx("p",{className:"text-sm text-gray-300 font-medium mb-2",children:"Upload en cours..."}),e.jsx("div",{className:"w-full max-w-xs bg-gray-700 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-purple-500 h-full transition-all duration-300",style:{width:`${b}%`}})}),e.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[b,"%"]})]})}),t&&!h&&e.jsxs("div",{className:"relative w-full h-full group",children:[e.jsx("img",{src:t,alt:"Pr√©visualisation",className:"w-full h-full object-cover rounded-lg",onError:C=>{C.currentTarget.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100"%3E%3Crect fill="%23374151" width="100" height="100"/%3E%3Ctext fill="%239CA3AF" font-family="sans-serif" font-size="14" x="50%25" y="50%25" text-anchor="middle" dominant-baseline="middle"%3EImage invalide%3C/text%3E%3C/svg%3E'}}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3 rounded-lg",children:[e.jsxs("button",{type:"button",onClick:J,className:"px-4 py-2 bg-pink-500 hover:bg-pink-600 text-white rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4"}),"Changer"]}),e.jsxs("button",{type:"button",onClick:Ce,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),"Supprimer"]})]}),e.jsxs("div",{className:"absolute top-2 left-2 px-2 py-1 bg-green-500/90 backdrop-blur-sm rounded text-xs text-white font-medium flex items-center gap-1",children:[e.jsx(Z,{className:"w-3 h-3"}),"Optimis√©e"]})]})]}),l&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-red-500/10 border border-red-500/50 rounded-lg",children:[e.jsx(V,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-red-400 font-medium",children:"Erreur"}),e.jsx("p",{className:"text-xs text-red-300 mt-1",children:l})]})]}),!l&&t&&!h&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[e.jsx(Pe,{className:"w-4 h-4"}),e.jsx("span",{children:"Image optimis√©e et h√©berg√©e sur votre serveur"})]})]})},Qe=async()=>{const{data:t,error:r}=await N.from("blog_posts").select(`
      *,
      category:blog_categories (
        name,
        slug,
        color,
        icon
      )
    `).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(s=>({...s,category_name:s.category?.name,category_slug:s.category?.slug,category_color:s.category?.color,category_icon:s.category?.icon}))},Ge=async()=>{const{data:t,error:r}=await N.from("blog_posts").select(`
      *,
      category:blog_categories (
        name,
        slug,
        color,
        icon
      )
    `).eq("status","published").order("published_at",{ascending:!1});if(r)throw r;return(t||[]).map(s=>({...s,category_name:s.category?.name,category_slug:s.category?.slug,category_color:s.category?.color,category_icon:s.category?.icon}))},Je=async t=>{const{data:r,error:s}=await N.from("blog_posts").select(`
      *,
      category:blog_categories (
        name,
        slug,
        color,
        icon
      )
    `).eq("id",t).single();if(s)throw s;return r?{...r,category_name:r.category?.name,category_slug:r.category?.slug,category_color:r.category?.color,category_icon:r.category?.icon}:null},Xe=async t=>{const{data:r,error:s}=await N.from("blog_posts").select(`
      *,
      category:blog_categories (
        name,
        slug,
        color,
        icon
      )
    `).eq("slug",t).eq("status","published").single();if(s)throw s;return r?{...r,category_name:r.category?.name,category_slug:r.category?.slug,category_color:r.category?.color,category_icon:r.category?.icon}:null},Ye=async t=>{!t.reading_time&&t.content&&(t.reading_time=ve(t.content)),t.status==="published"&&!t.published_at&&(t.published_at=new Date().toISOString());const{data:r,error:s}=await N.from("blog_posts").insert(t).select().single();if(s)throw s;return r},G=async(t,r)=>{if(r.content&&(r.reading_time=ve(r.content)),r.status==="published"){const{data:i}=await N.from("blog_posts").select("status, published_at").eq("id",t).single();i?.status==="draft"&&!i.published_at&&(r.published_at=new Date().toISOString())}const{data:s,error:a}=await N.from("blog_posts").update(r).eq("id",t).select().single();if(a)throw a;return s},Ze=async t=>{const{error:r}=await N.from("blog_posts").delete().eq("id",t);if(r)throw r},et=async t=>{const{data:r}=await N.from("blog_posts").select("views").eq("id",t).single();r&&await N.from("blog_posts").update({views:(r.views||0)+1}).eq("id",t)};function ve(t){const s=t.replace(/<[^>]*>/g,"").split(/\s+/).filter(Boolean).length;return Math.max(1,Math.round(s/200))}function tt(t){return t.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}const rt=()=>B({queryKey:["blog-posts"],queryFn:Qe,staleTime:1e3*60*5}),qt=()=>B({queryKey:["blog-posts","published"],queryFn:Ge,staleTime:1e3*60*10}),nt=t=>B({queryKey:["blog-posts",t],queryFn:()=>t?Je(t):null,enabled:!!t,staleTime:1e3*60*5}),Dt=t=>B({queryKey:["blog-posts","slug",t],queryFn:()=>t?Xe(t):null,enabled:!!t,staleTime:1e3*60*10}),st=()=>{const t=L();return P({mutationFn:Ye,onSuccess:()=>{t.invalidateQueries({queryKey:["blog-posts"]})}})},at=()=>{const t=L();return P({mutationFn:({id:r,data:s})=>G(r,s),onSuccess:r=>{t.invalidateQueries({queryKey:["blog-posts"]}),t.invalidateQueries({queryKey:["blog-posts",r.id]}),t.invalidateQueries({queryKey:["blog-posts","slug",r.slug]})}})},ot=()=>{const t=L();return P({mutationFn:Ze,onSuccess:()=>{t.invalidateQueries({queryKey:["blog-posts"]})}})},it=()=>{const t=L();return P({mutationFn:r=>G(r,{status:"published",published_at:new Date().toISOString()}),onSuccess:()=>{t.invalidateQueries({queryKey:["blog-posts"]})}})},lt=()=>{const t=L();return P({mutationFn:r=>G(r,{status:"draft"}),onSuccess:()=>{t.invalidateQueries({queryKey:["blog-posts"]})}})},Ot=()=>P({mutationFn:et}),zt=(t,r,s=[])=>B({queryKey:["similarPosts",t,r,s],queryFn:async()=>{if(!t)return[];let a=N.from("published_blog_posts").select("*").neq("id",t).eq("status","published").limit(6);r&&(a=a.eq("category_id",r));const{data:i,error:d}=await a;if(d)throw d;if(s.length>0&&i){const n=i.map(c=>{const u=c.tags?.filter(m=>s.includes(m))||[];return{...c,score:u.length}});return n.sort((c,u)=>u.score-c.score),n.slice(0,3)}return(i||[]).slice(0,3)},enabled:!!t}),ct=async()=>{const{data:t,error:r}=await N.from("blog_categories").select("*").order("name");if(r)throw r;return t||[]},dt=async t=>{const{data:r,error:s}=await N.from("blog_categories").insert(t).select().single();if(s)throw s;return r},ut=async(t,r)=>{const{data:s,error:a}=await N.from("blog_categories").update(r).eq("id",t).select().single();if(a)throw a;return s},pt=async t=>{const{error:r}=await N.from("blog_categories").delete().eq("id",t);if(r)throw r},we=()=>B({queryKey:["blog-categories"],queryFn:ct,staleTime:1e3*60*10}),Ft=()=>{const t=L();return P({mutationFn:dt,onSuccess:()=>{t.invalidateQueries({queryKey:["blog-categories"]})}})},Rt=()=>{const t=L();return P({mutationFn:({id:r,data:s})=>ut(r,s),onSuccess:()=>{t.invalidateQueries({queryKey:["blog-categories"]})}})},At=()=>{const t=L();return P({mutationFn:pt,onSuccess:()=>{t.invalidateQueries({queryKey:["blog-categories"]})}})},Mt=()=>{const{data:t,isLoading:r}=rt(),{data:s}=we(),a=ot(),i=it(),d=lt(),[n,c]=v.useState(""),[u,m]=v.useState(""),[h,f]=v.useState(""),[b,y]=v.useState(null),l=v.useMemo(()=>t?{total:t.length,published:t.filter(g=>g.status==="published").length,draft:t.filter(g=>g.status==="draft").length,totalViews:t.reduce((g,p)=>g+(p.views||0),0)}:{total:0,published:0,draft:0,totalViews:0},[t]),x=v.useMemo(()=>t?t.filter(g=>{const p=g.title?.toLowerCase().includes(n.toLowerCase())||g.excerpt?.toLowerCase().includes(n.toLowerCase()),j=!u||g.category_id===u,w=!h||g.status===h;return p&&j&&w}):[],[t,n,u,h]),_=async g=>{try{await a.mutateAsync(g),E.success("‚úÖ Article supprim√© avec succ√®s !"),y(null)}catch(p){console.error("Erreur lors de la suppression:",p),E.error("‚ùå Erreur lors de la suppression de l'article")}},k=async g=>{try{await i.mutateAsync(g),E.success("‚úÖ Article publi√© avec succ√®s !")}catch(p){console.error("Erreur lors de la publication:",p),E.error("‚ùå Erreur lors de la publication")}},T=async g=>{try{await d.mutateAsync(g),E.success("‚úÖ Article mis en brouillon")}catch(p){console.error("Erreur:",p),E.error("‚ùå Erreur lors de la d√©publication")}};return r?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-400"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[e.jsx(H,{className:"text-cyan-400",size:32}),"Articles de Blog"]}),e.jsx("p",{className:"text-gray-400 mt-2",children:"G√©rez vos articles, brouillons et publications"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(z,{to:"/admin/blog/categories",className:"flex items-center gap-2 px-6 py-3 border border-gray-600 text-white rounded-xl hover:bg-white/5 transition-colors",children:[e.jsx(Le,{size:20}),"Cat√©gories"]}),e.jsxs(z,{to:"/admin/blog/new",className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-cyan-500 to-purple-500 text-white rounded-xl hover:shadow-lg hover:shadow-cyan-500/50 transition-all",children:[e.jsx(ue,{size:20}),"Nouvel Article"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-gray-700/50 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-cyan-500/20 rounded-lg",children:e.jsx(H,{className:"text-cyan-400",size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total Articles"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:l.total})]})]})}),e.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-gray-700/50 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-green-500/20 rounded-lg",children:e.jsx(F,{className:"text-green-400",size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Publi√©s"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:l.published})]})]})}),e.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-gray-700/50 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-yellow-500/20 rounded-lg",children:e.jsx(R,{className:"text-yellow-400",size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Brouillons"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:l.draft})]})]})}),e.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-gray-700/50 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-purple-500/20 rounded-lg",children:e.jsx(Ie,{className:"text-purple-400",size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total Vues"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:l.totalViews.toLocaleString()})]})]})})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-gray-700/50 rounded-xl p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Be,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Rechercher un article...",value:n,onChange:g=>c(g.target.value),className:"w-full pl-12 pr-4 py-3 bg-white/5 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-cyan-500"})]}),e.jsxs("div",{className:"relative min-w-[200px]",children:[e.jsx(qe,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsxs("select",{value:u,onChange:g=>m(g.target.value),className:"w-full pl-12 pr-4 py-3 bg-white/5 border border-gray-600 rounded-xl text-white focus:outline-none focus:border-cyan-500 appearance-none cursor-pointer",children:[e.jsx("option",{value:"",children:"Toutes les cat√©gories"}),s?.map(g=>e.jsx("option",{value:g.id,children:g.name},g.id))]})]}),e.jsx("div",{className:"relative min-w-[200px]",children:e.jsxs("select",{value:h,onChange:g=>f(g.target.value),className:"w-full px-4 py-3 bg-white/5 border border-gray-600 rounded-xl text-white focus:outline-none focus:border-cyan-500 appearance-none cursor-pointer",children:[e.jsx("option",{value:"",children:"Tous les statuts"}),e.jsx("option",{value:"published",children:"Publi√©s"}),e.jsx("option",{value:"draft",children:"Brouillons"})]})}),(n||u||h)&&e.jsx("button",{onClick:()=>{c(""),m(""),f("")},className:"px-4 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-xl transition-colors",children:"R√©initialiser"})]})}),e.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-gray-700/50 rounded-xl overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-white/5 border-b border-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-4 text-gray-400 font-semibold",children:"Article"}),e.jsx("th",{className:"text-left px-6 py-4 text-gray-400 font-semibold",children:"Cat√©gorie"}),e.jsx("th",{className:"text-left px-6 py-4 text-gray-400 font-semibold",children:"Statut"}),e.jsx("th",{className:"text-left px-6 py-4 text-gray-400 font-semibold",children:"Stats"}),e.jsx("th",{className:"text-left px-6 py-4 text-gray-400 font-semibold",children:"Date"}),e.jsx("th",{className:"text-right px-6 py-4 text-gray-400 font-semibold",children:"Actions"})]})}),e.jsx("tbody",{children:x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-12 text-gray-400",children:n||u||h?"Aucun article ne correspond √† vos crit√®res":"Aucun article pour le moment"})}):x.map(g=>e.jsxs("tr",{className:"border-b border-gray-700/30 hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[g.featured_image&&e.jsx("img",{src:g.featured_image,alt:g.title,className:"w-20 h-14 object-cover rounded-lg"}),e.jsxs("div",{className:"max-w-md",children:[e.jsx("p",{className:"font-semibold text-white line-clamp-1",children:g.title}),e.jsx("p",{className:"text-sm text-gray-400 line-clamp-2 mt-1",children:g.excerpt})]})]})}),e.jsx("td",{className:"px-6 py-4",children:g.category_name&&e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium",style:{backgroundColor:`${g.category_color}20`,color:g.category_color},children:g.category_name})}),e.jsx("td",{className:"px-6 py-4",children:g.status==="published"?e.jsxs("span",{className:"flex items-center gap-2 px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm font-medium w-fit",children:[e.jsx(F,{size:14}),"Publi√©"]}):e.jsxs("span",{className:"flex items-center gap-2 px-3 py-1 bg-yellow-500/20 text-yellow-400 rounded-full text-sm font-medium w-fit",children:[e.jsx(R,{size:14}),"Brouillon"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col gap-1 text-sm text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{size:14}),g.views||0," vues"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{size:14}),g.reading_time||0," min"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-400",children:g.status==="published"&&g.published_at?new Date(g.published_at).toLocaleDateString("fr-FR"):new Date(g.created_at).toLocaleDateString("fr-FR")})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[g.status==="draft"?e.jsx("button",{onClick:()=>k(g.id),className:"p-2 text-green-400 hover:text-green-300 hover:bg-green-500/10 rounded-lg transition-colors",title:"Publier",children:e.jsx(F,{size:18})}):e.jsx("button",{onClick:()=>T(g.id),className:"p-2 text-yellow-400 hover:text-yellow-300 hover:bg-yellow-500/10 rounded-lg transition-colors",title:"Mettre en brouillon",children:e.jsx(R,{size:18})}),e.jsx(z,{to:`/admin/blog/${g.id}/edit`,className:"p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-500/10 rounded-lg transition-colors",title:"Modifier",children:e.jsx(Oe,{size:18})}),b===g.id?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>_(g.id),className:"px-3 py-1 text-white bg-red-500 hover:bg-red-600 rounded-lg transition-colors text-xs",children:"Confirmer"}),e.jsx("button",{onClick:()=>y(null),className:"px-3 py-1 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors text-xs",children:"Annuler"})]}):e.jsx("button",{onClick:()=>y(g.id),className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors",title:"Supprimer",children:e.jsx(ze,{size:18})})]})})]},g.id))})]})})}),e.jsxs("div",{className:"text-center text-gray-400 text-sm",children:[x.length," article",x.length>1?"s":""," affich√©",x.length>1?"s":"",(n||u||h)&&` sur ${t?.length||0} total`]})]})};var A={exports:{}},M,te;function gt(){if(te)return M;te=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return M=t,M}var U,re;function mt(){if(re)return U;re=1;var t=gt();function r(){}function s(){}return s.resetWarningCache=r,U=function(){function a(n,c,u,m,h,f){if(f!==t){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}a.isRequired=a;function i(){return a}var d={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:i,element:a,elementType:a,instanceOf:i,node:a,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:s,resetWarningCache:r};return d.PropTypes=d,d},U}var ne;function ht(){return ne||(ne=1,A.exports=mt()()),A.exports}var o=ht(),W=function(){return W=Object.assign||function(t){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},W.apply(this,arguments)},je={onActivate:o.func,onAddUndo:o.func,onBeforeAddUndo:o.func,onBeforeExecCommand:o.func,onBeforeGetContent:o.func,onBeforeRenderUI:o.func,onBeforeSetContent:o.func,onBeforePaste:o.func,onBlur:o.func,onChange:o.func,onClearUndos:o.func,onClick:o.func,onContextMenu:o.func,onCommentChange:o.func,onCompositionEnd:o.func,onCompositionStart:o.func,onCompositionUpdate:o.func,onCopy:o.func,onCut:o.func,onDblclick:o.func,onDeactivate:o.func,onDirty:o.func,onDrag:o.func,onDragDrop:o.func,onDragEnd:o.func,onDragGesture:o.func,onDragOver:o.func,onDrop:o.func,onExecCommand:o.func,onFocus:o.func,onFocusIn:o.func,onFocusOut:o.func,onGetContent:o.func,onHide:o.func,onInit:o.func,onInput:o.func,onKeyDown:o.func,onKeyPress:o.func,onKeyUp:o.func,onLoadContent:o.func,onMouseDown:o.func,onMouseEnter:o.func,onMouseLeave:o.func,onMouseMove:o.func,onMouseOut:o.func,onMouseOver:o.func,onMouseUp:o.func,onNodeChange:o.func,onObjectResizeStart:o.func,onObjectResized:o.func,onObjectSelected:o.func,onPaste:o.func,onPostProcess:o.func,onPostRender:o.func,onPreProcess:o.func,onProgressState:o.func,onRedo:o.func,onRemove:o.func,onReset:o.func,onSaveContent:o.func,onSelectionChange:o.func,onSetAttrib:o.func,onSetContent:o.func,onShow:o.func,onSubmit:o.func,onUndo:o.func,onVisualAid:o.func,onSkinLoadError:o.func,onThemeLoadError:o.func,onModelLoadError:o.func,onPluginLoadError:o.func,onIconsLoadError:o.func,onLanguageLoadError:o.func,onScriptsLoad:o.func,onScriptsLoadError:o.func},ft=W({apiKey:o.string,licenseKey:o.string,id:o.string,inline:o.bool,init:o.object,initialValue:o.string,onEditorChange:o.func,value:o.string,tagName:o.string,tabIndex:o.number,cloudChannel:o.string,plugins:o.oneOfType([o.string,o.array]),toolbar:o.oneOfType([o.string,o.array]),disabled:o.bool,readonly:o.bool,textareaName:o.string,tinymceScriptSrc:o.oneOfType([o.string,o.arrayOf(o.string),o.arrayOf(o.shape({src:o.string,async:o.bool,defer:o.bool}))]),rollback:o.oneOfType([o.number,o.oneOf([!1])]),scriptLoading:o.shape({async:o.bool,defer:o.bool,delay:o.number})},je),Ne=function(t){var r=t;return r&&r.tinymce?r.tinymce:null},K=function(t){return typeof t=="function"},se=function(t){return t in je},ae=function(t){return t.substr(2)},xt=function(t,r,s,a,i,d,n){var c=Object.keys(i).filter(se),u=Object.keys(d).filter(se),m=c.filter(function(f){return d[f]===void 0}),h=u.filter(function(f){return i[f]===void 0});m.forEach(function(f){var b=ae(f),y=n[b];s(b,y),delete n[b]}),h.forEach(function(f){var b=a(t,f),y=ae(f);n[y]=b,r(y,b)})},bt=function(t,r,s,a,i){return xt(i,t.on.bind(t),t.off.bind(t),function(d,n){return function(c){var u;return(u=d(n))===null||u===void 0?void 0:u(c,t)}},r,s,a)},oe=0,_e=function(t){var r=Date.now(),s=Math.floor(Math.random()*1e9);return oe++,t+"_"+s+oe+String(r)},ie=function(t){return t!==null&&(t.tagName.toLowerCase()==="textarea"||t.tagName.toLowerCase()==="input")},le=function(t){return typeof t>"u"||t===""?[]:Array.isArray(t)?t:t.split(" ")},yt=function(t,r){return le(t).concat(le(r))},vt=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},wt=function(t){if(!("isConnected"in Node.prototype)){for(var r=t,s=t.parentNode;s!=null;)r=s,s=r.parentNode;return r===t.ownerDocument}return t.isConnected},ce=function(t,r){t!==void 0&&(t.mode!=null&&typeof t.mode=="object"&&typeof t.mode.set=="function"?t.mode.set(r):t.setMode(r))},jt=function(t){var r=Ne(t);if(!r)throw new Error("tinymce should have been loaded into global scope");return r},de=function(t){return t.options&&t.options.isRegistered("disabled")},Q=function(){return Q=Object.assign||function(t){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Q.apply(this,arguments)},Nt=function(t,r,s){var a,i,d=t.createElement("script");d.referrerPolicy="origin",d.type="application/javascript",d.id=r.id,d.src=r.src,d.async=(a=r.async)!==null&&a!==void 0?a:!1,d.defer=(i=r.defer)!==null&&i!==void 0?i:!1;var n=function(){d.removeEventListener("load",n),d.removeEventListener("error",c),s(r.src)},c=function(u){d.removeEventListener("load",n),d.removeEventListener("error",c),s(r.src,u)};d.addEventListener("load",n),d.addEventListener("error",c),t.head&&t.head.appendChild(d)},_t=function(t){var r={},s=function(n,c){var u=r[n];u.done=!0,u.error=c;for(var m=0,h=u.handlers;m<h.length;m++){var f=h[m];f(n,c)}u.handlers=[]},a=function(n,c,u){var m=function(T){return u!==void 0?u(T):console.error(T)};if(n.length===0){m(new Error("At least one script must be provided"));return}for(var h=0,f=!1,b=function(T,g){f||(g?(f=!0,m(g)):++h===n.length&&c())},y=0,l=n;y<l.length;y++){var x=l[y],_=r[x.src];if(_)_.done?b(x.src,_.error):_.handlers.push(b);else{var k=_e("tiny-");r[x.src]={id:k,src:x.src,done:!1,error:null,handlers:[b]},Nt(t,Q({id:k},x),s)}}},i=function(){for(var n,c=0,u=Object.values(r);c<u.length;c++){var m=u[c],h=t.getElementById(m.id);h!=null&&h.tagName==="SCRIPT"&&((n=h.parentNode)===null||n===void 0||n.removeChild(h))}r={}},d=function(){return t};return{loadScripts:a,deleteScripts:i,getDocument:d}},Ct=function(){var t=[],r=function(i){var d=t.find(function(n){return n.getDocument()===i});return d===void 0&&(d=_t(i),t.push(d)),d},s=function(i,d,n,c,u){var m=function(){return r(i).loadScripts(d,c,u)};n>0?setTimeout(m,n):m()},a=function(){for(var i=t.pop();i!=null;i=t.pop())i.deleteScripts()};return{loadList:s,reinitialize:a}},St=Ct(),Et=(function(){var t=function(r,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(a[d]=i[d])},t(r,s)};return function(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(r,s);function a(){this.constructor=r}r.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}})(),I=function(){return I=Object.assign||function(t){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},I.apply(this,arguments)},$="change keyup compositionend setcontent CommentChange",kt=(function(t){Et(r,t);function r(s){var a,i,d,n=t.call(this,s)||this;return n.rollbackTimer=void 0,n.valueCursor=void 0,n.rollbackChange=function(){var c=n.editor,u=n.props.value;c&&u&&u!==n.currentContent&&c.undoManager.ignore(function(){if(c.setContent(u),n.valueCursor&&(!n.inline||c.hasFocus()))try{c.selection.moveToBookmark(n.valueCursor)}catch{}}),n.rollbackTimer=void 0},n.handleBeforeInput=function(c){if(n.props.value!==void 0&&n.props.value===n.currentContent&&n.editor&&(!n.inline||n.editor.hasFocus()))try{n.valueCursor=n.editor.selection.getBookmark(3)}catch{}},n.handleBeforeInputSpecial=function(c){(c.key==="Enter"||c.key==="Backspace"||c.key==="Delete")&&n.handleBeforeInput(c)},n.handleEditorChange=function(c){var u=n.editor;if(u&&u.initialized){var m=u.getContent();n.props.value!==void 0&&n.props.value!==m&&n.props.rollback!==!1&&(n.rollbackTimer||(n.rollbackTimer=window.setTimeout(n.rollbackChange,typeof n.props.rollback=="number"?n.props.rollback:200))),m!==n.currentContent&&(n.currentContent=m,K(n.props.onEditorChange)&&n.props.onEditorChange(m,u))}},n.handleEditorChangeSpecial=function(c){(c.key==="Backspace"||c.key==="Delete")&&n.handleEditorChange(c)},n.initialise=function(c){var u,m,h;c===void 0&&(c=0);var f=n.elementRef.current;if(f){if(!wt(f)){if(c===0)setTimeout(function(){return n.initialise(1)},1);else if(c<100)setTimeout(function(){return n.initialise(c+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var b=jt(n.view),y=I(I(I(I({},n.props.init),{selector:void 0,target:f,disabled:n.props.disabled,readonly:n.props.readonly,inline:n.inline,plugins:yt((u=n.props.init)===null||u===void 0?void 0:u.plugins,n.props.plugins),toolbar:(m=n.props.toolbar)!==null&&m!==void 0?m:(h=n.props.init)===null||h===void 0?void 0:h.toolbar}),n.props.licenseKey?{license_key:n.props.licenseKey}:{}),{setup:function(l){n.editor=l,n.bindHandlers({}),n.inline&&!ie(f)&&l.once("PostRender",function(x){l.setContent(n.getInitialValue(),{no_events:!0})}),n.props.init&&K(n.props.init.setup)&&n.props.init.setup(l),n.props.disabled&&(de(n.editor)?n.editor.options.set("disabled",n.props.disabled):n.editor.mode.set("readonly"))},init_instance_callback:function(l){var x,_=n.getInitialValue();n.currentContent=(x=n.currentContent)!==null&&x!==void 0?x:l.getContent(),n.currentContent!==_&&(n.currentContent=_,l.setContent(_),l.undoManager.clear(),l.undoManager.add(),l.setDirty(!1)),n.props.init&&K(n.props.init.init_instance_callback)&&n.props.init.init_instance_callback(l)}});n.inline||(f.style.visibility=""),ie(f)&&(f.value=n.getInitialValue()),b.init(y)}},n.id=n.props.id||_e("tiny-react"),n.elementRef=v.createRef(),n.inline=(d=(a=n.props.inline)!==null&&a!==void 0?a:(i=n.props.init)===null||i===void 0?void 0:i.inline)!==null&&d!==void 0?d:!1,n.boundHandlers={},n}return Object.defineProperty(r.prototype,"view",{get:function(){var s,a;return(a=(s=this.elementRef.current)===null||s===void 0?void 0:s.ownerDocument.defaultView)!==null&&a!==void 0?a:window},enumerable:!1,configurable:!0}),r.prototype.componentDidUpdate=function(s){var a=this,i,d;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(s),this.editor.initialized)){if(this.currentContent=(i=this.currentContent)!==null&&i!==void 0?i:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==s.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var n=this.editor;n.undoManager.transact(function(){var u;if(!a.inline||n.hasFocus())try{u=n.selection.getBookmark(3)}catch{}var m=a.valueCursor;if(n.setContent(a.props.value),!a.inline||n.hasFocus())for(var h=0,f=[u,m];h<f.length;h++){var b=f[h];if(b)try{n.selection.moveToBookmark(b),a.valueCursor=b;break}catch{}}})}if(this.props.readonly!==s.readonly){var c=(d=this.props.readonly)!==null&&d!==void 0?d:!1;ce(this.editor,c?"readonly":"design")}this.props.disabled!==s.disabled&&(de(this.editor)?this.editor.options.set("disabled",this.props.disabled):ce(this.editor,this.props.disabled?"readonly":"design"))}},r.prototype.componentDidMount=function(){var s=this,a,i,d,n,c;if(Ne(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(i=(a=this.props).onScriptsLoadError)===null||i===void 0||i.call(a,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((d=this.elementRef.current)===null||d===void 0)&&d.ownerDocument){var u=function(){var h,f;(f=(h=s.props).onScriptsLoad)===null||f===void 0||f.call(h),s.initialise()},m=function(h){var f,b;(b=(f=s.props).onScriptsLoadError)===null||b===void 0||b.call(f,h)};St.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(c=(n=this.props.scriptLoading)===null||n===void 0?void 0:n.delay)!==null&&c!==void 0?c:0,u,m)}},r.prototype.componentWillUnmount=function(){var s=this,a=this.editor;a&&(a.off($,this.handleEditorChange),a.off(this.beforeInputEvent(),this.handleBeforeInput),a.off("keypress",this.handleEditorChangeSpecial),a.off("keydown",this.handleBeforeInputSpecial),a.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(i){a.off(i,s.boundHandlers[i])}),this.boundHandlers={},a.remove(),this.editor=void 0)},r.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},r.prototype.beforeInputEvent=function(){return vt()?"beforeinput SelectionChange":"SelectionChange"},r.prototype.renderInline=function(){var s=this.props.tagName,a=s===void 0?"div":s;return v.createElement(a,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},r.prototype.renderIframe=function(){return v.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},r.prototype.getScriptSources=function(){var s,a,i=(s=this.props.scriptLoading)===null||s===void 0?void 0:s.async,d=(a=this.props.scriptLoading)===null||a===void 0?void 0:a.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:i,defer:d}]:this.props.tinymceScriptSrc.map(function(m){return typeof m=="string"?{src:m,async:i,defer:d}:m});var n=this.props.cloudChannel,c=this.props.apiKey?this.props.apiKey:"no-api-key",u="https://cdn.tiny.cloud/1/".concat(c,"/tinymce/").concat(n,"/tinymce.min.js");return[{src:u,async:i,defer:d}]},r.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},r.prototype.bindHandlers=function(s){var a=this;if(this.editor!==void 0){bt(this.editor,s,this.props,this.boundHandlers,function(c){return a.props[c]});var i=function(c){return c.onEditorChange!==void 0||c.value!==void 0},d=i(s),n=i(this.props);!d&&n?(this.editor.on($,this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):d&&!n&&(this.editor.off($,this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},r.propTypes=ft,r.defaultProps={cloudChannel:"8"},r})(v.Component);const Tt=({value:t,onChange:r,height:s=600,placeholder:a="√âcrivez votre article ici..."})=>{const i=v.useRef(null);return e.jsxs("div",{className:"tinymce-wrapper",children:[e.jsx(kt,{apiKey:"bu54mzi9mcvwxpiejvgojjc3wb4eybm74111d2ej6lc7eztr",onInit:(d,n)=>i.current=n,value:t,onEditorChange:r,init:{height:s,menubar:!0,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","help","wordcount","codesample"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | link image media codesample | code preview fullscreen | help",content_style:`
            body {
              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
              font-size: 16px;
              line-height: 1.6;
              color: #1f2937;
              padding: 20px;
              background: #ffffff;
            }
            img {
              max-width: 100%;
              height: auto;
              border-radius: 8px;
              margin: 20px 0;
            }
            pre {
              background: #1e293b;
              color: #e2e8f0;
              padding: 16px;
              border-radius: 8px;
              overflow-x: auto;
              font-size: 14px;
              line-height: 1.5;
            }
            code {
              background: #f1f5f9;
              color: #e11d48;
              padding: 2px 6px;
              border-radius: 4px;
              font-size: 14px;
              font-family: 'Monaco', 'Courier New', monospace;
            }
            pre code {
              background: transparent;
              color: inherit;
              padding: 0;
            }
            blockquote {
              border-left: 4px solid #3b82f6;
              margin: 20px 0;
              padding: 10px 20px;
              background: #f0f9ff;
              font-style: italic;
            }
            table {
              border-collapse: collapse;
              width: 100%;
              margin: 20px 0;
            }
            table th,
            table td {
              border: 1px solid #e5e7eb;
              padding: 12px;
              text-align: left;
            }
            table th {
              background: #f9fafb;
              font-weight: 600;
            }
            h1 {
              font-size: 2.5rem;
              font-weight: 700;
              margin-top: 0;
              margin-bottom: 1rem;
              line-height: 1.2;
            }
            h2 {
              font-size: 2rem;
              font-weight: 700;
              margin-top: 2rem;
              margin-bottom: 1rem;
              line-height: 1.3;
            }
            h3 {
              font-size: 1.5rem;
              font-weight: 600;
              margin-top: 1.5rem;
              margin-bottom: 0.75rem;
            }
            p {
              margin-bottom: 1rem;
            }
            ul, ol {
              margin: 1rem 0;
              padding-left: 2rem;
            }
            li {
              margin-bottom: 0.5rem;
            }
            a {
              color: #3b82f6;
              text-decoration: underline;
            }
            a:hover {
              color: #2563eb;
            }
          `,placeholder:a,skin:"oxide",content_css:"default",images_upload_handler:async d=>new Promise(n=>{const c=new FileReader;c.onload=()=>{n(c.result)},c.readAsDataURL(d.blob())}),codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"TypeScript",value:"typescript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C++",value:"cpp"},{text:"C#",value:"csharp"},{text:"SQL",value:"sql"},{text:"Bash",value:"bash"},{text:"JSON",value:"json"}],branding:!1,resize:!0,statusbar:!0,elementpath:!1,promotion:!1}}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["üí° ",e.jsx("strong",{children:"Pour production :"})," Obtiens une cl√© API gratuite sur"," ",e.jsx("a",{href:"https://www.tiny.cloud/auth/signup/",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-500 hover:underline",children:"tiny.cloud"})," ","(1000 chargements/mois gratuit)"]})]})},Ut=()=>{const{id:t}=Ee(),r=ke(),s=!!t,{data:a,isLoading:i}=nt(t||null),{data:d}=we(),n=st(),c=at(),[u,m]=v.useState(!1),[h,f]=v.useState("content"),[b,y]=v.useState(""),[l,x]=v.useState({title:"",slug:"",category_id:"",excerpt:"",content:"",featured_image:"",author:"Leonce Ouattara",tags:[],status:"draft",reading_time:0,meta_title:"",meta_description:"",published_at:""});v.useEffect(()=>{a&&x({title:a.title||"",slug:a.slug||"",category_id:a.category_id||"",excerpt:a.excerpt||"",content:a.content||"",featured_image:a.featured_image||"",author:a.author||"Leonce Ouattara",tags:a.tags||[],status:a.status||"draft",reading_time:a.reading_time||0,meta_title:a.meta_title||"",meta_description:a.meta_description||"",published_at:a.published_at||""})},[a]),v.useEffect(()=>{if(!s&&l.title){const p=tt(l.title);x(j=>({...j,slug:p}))}},[l.title,s]),v.useEffect(()=>{if(l.content){const j=l.content.replace(/<[^>]*>/g,"").split(/\s+/).filter(Boolean).length,w=Math.max(1,Math.round(j/200));x(O=>({...O,reading_time:w}))}},[l.content]);const _=async(p,j=!1)=>{p.preventDefault(),m(!0);try{if(!l.title.trim()){E.error("Le titre est requis"),m(!1);return}if(!l.content.trim()){E.error("Le contenu est requis"),m(!1);return}if(!l.category_id){E.error("La cat√©gorie est requise"),m(!1);return}const w={...l,status:j?"published":l.status,published_at:j&&!l.published_at?new Date().toISOString():l.published_at};s&&t?(await c.mutateAsync({id:t,data:w}),E.success(j?"‚úÖ Article publi√© avec succ√®s !":"‚úÖ Article modifi√© avec succ√®s !")):(await n.mutateAsync({slug:w.slug,title:w.title,excerpt:w.excerpt,content:w.content,featured_image:w.featured_image,author:w.author,category_id:w.category_id,tags:w.tags,status:w.status,reading_time:w.reading_time,meta_title:w.meta_title,meta_description:w.meta_description,published_at:w.published_at}),E.success(j?"‚úÖ Article cr√©√© et publi√© !":"‚úÖ Article cr√©√© en brouillon !")),r("/admin/blog")}catch(w){console.error("Erreur:",w),E.error(`‚ùå Erreur: ${w.message||"Une erreur est survenue"}`)}finally{m(!1)}},k=()=>{b.trim()&&!l.tags.includes(b.trim())&&(x({...l,tags:[...l.tags,b.trim()]}),y(""))},T=p=>{x({...l,tags:l.tags.filter(j=>j!==p)})};if(i)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-400"})});const g=[{id:"content",label:"Contenu",icon:H},{id:"editor",label:"√âditeur",icon:Ae},{id:"seo",label:"Tags & SEO",icon:Me},{id:"publication",label:"Publication",icon:Ue}];return e.jsxs("form",{onSubmit:p=>_(p,!1),className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{type:"button",onClick:()=>r("/admin/blog"),className:"p-2 hover:bg-white/5 rounded-lg transition-colors",children:e.jsx(Fe,{className:"text-gray-400",size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:s?"Modifier l'article":"Nouvel article"}),e.jsx("p",{className:"text-gray-400 mt-1",children:s?"Modifiez les informations de l'article":"Cr√©ez un nouvel article pour votre blog"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>r("/admin/blog"),className:"px-6 py-3 border border-gray-600 text-white rounded-xl hover:bg-white/5 transition-colors",children:"Annuler"}),e.jsxs("button",{type:"submit",disabled:u,className:"flex items-center gap-2 px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-xl transition-colors disabled:opacity-50",children:[e.jsx(Re,{size:20}),u?"Enregistrement...":"Enregistrer brouillon"]}),e.jsxs("button",{type:"button",onClick:p=>_(p,!0),disabled:u,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-cyan-500 to-purple-500 text-white rounded-xl hover:shadow-lg hover:shadow-cyan-500/50 transition-all disabled:opacity-50",children:[e.jsx(pe,{size:20}),"Publier"]})]})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-gray-700/50 rounded-xl p-2",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto",children:g.map(p=>{const j=p.icon;return e.jsxs("button",{type:"button",onClick:()=>f(p.id),className:`
                  flex items-center gap-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors
                  ${h===p.id?"bg-gradient-to-r from-cyan-500 to-purple-500 text-white":"text-gray-400 hover:text-white hover:bg-white/5"}
                `,children:[e.jsx(j,{size:18}),p.label]},p.id)})})}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-gray-700/50 rounded-xl p-8",children:[h==="content"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Informations de base"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-semibold mb-2",children:"Titre de l'article *"}),e.jsx("input",{type:"text",value:l.title,onChange:p=>x({...l,title:p.target.value}),className:"w-full px-4 py-3 bg-white/5 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-cyan-500",placeholder:"Mon Premier Article React",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-semibold mb-2",children:"Slug (URL)"}),e.jsx("input",{type:"text",value:l.slug,onChange:p=>x({...l,slug:p.target.value}),className:"w-full px-4 py-3 bg-white/5 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-cyan-500",placeholder:"mon-premier-article-react"}),e.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["URL de l'article : /blog/",l.slug||"slug-automatique"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-semibold mb-2",children:"Cat√©gorie *"}),e.jsxs("select",{value:l.category_id,onChange:p=>x({...l,category_id:p.target.value}),className:"w-full px-4 py-3 bg-white/5 border border-gray-600 rounded-xl text-white focus:outline-none focus:border-cyan-500 appearance-none cursor-pointer",required:!0,children:[e.jsx("option",{value:"",children:"S√©lectionner une cat√©gorie"}),d?.map(p=>e.jsx("option",{value:p.id,children:p.name},p.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-semibold mb-2",children:"R√©sum√© (Excerpt)"}),e.jsx("textarea",{value:l.excerpt,onChange:p=>x({...l,excerpt:p.target.value}),rows:4,maxLength:200,className:"w-full px-4 py-3 bg-white/5 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-cyan-500 resize-none",placeholder:"Un r√©sum√© court de votre article (150-200 caract√®res)..."}),e.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[l.excerpt.length,"/200 caract√®res"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-semibold mb-2",children:"Image √† la une"}),e.jsx(We,{value:l.featured_image,onChange:p=>x({...l,featured_image:p}),folder:"blog",label:"",helpText:"Recommand√© : 1200√ó630px minimum, format JPG ou PNG"})]})]}),h==="editor"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Contenu de l'article"}),e.jsx("div",{className:"text-sm text-gray-400",children:l.content?`${l.content.replace(/<[^>]*>/g,"").split(/\s+/).length} mots`:"0 mots"})]}),e.jsx(Tt,{value:l.content,onChange:p=>x({...l,content:p}),height:600,placeholder:"√âcrivez votre article ici..."})]}),h==="seo"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Tags & R√©f√©rencement"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-semibold mb-2",children:"Tags"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",value:b,onChange:p=>y(p.target.value),onKeyPress:p=>p.key==="Enter"&&(p.preventDefault(),k()),className:"flex-1 px-4 py-2 bg-white/5 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-cyan-500",placeholder:"Ex: React, TypeScript, Tutorial..."}),e.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-white rounded-lg transition-colors",children:e.jsx(ue,{size:20})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.tags.map((p,j)=>e.jsxs("span",{className:"flex items-center gap-2 px-3 py-1 bg-cyan-500/20 text-cyan-400 rounded-lg",children:[p,e.jsx("button",{type:"button",onClick:()=>T(p),className:"hover:text-red-400",children:e.jsx(V,{size:14})})]},j))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-semibold mb-2",children:"Meta Title (SEO)"}),e.jsx("input",{type:"text",value:l.meta_title,onChange:p=>x({...l,meta_title:p.target.value}),maxLength:60,className:"w-full px-4 py-3 bg-white/5 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-cyan-500",placeholder:"Titre pour les moteurs de recherche (60 caract√®res max)"}),e.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[l.meta_title.length,"/60 caract√®res"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-semibold mb-2",children:"Meta Description (SEO)"}),e.jsx("textarea",{value:l.meta_description,onChange:p=>x({...l,meta_description:p.target.value}),rows:3,maxLength:160,className:"w-full px-4 py-3 bg-white/5 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-cyan-500 resize-none",placeholder:"Description pour les moteurs de recherche (160 caract√®res max)"}),e.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[l.meta_description.length,"/160 caract√®res"]})]}),e.jsxs("div",{className:"p-4 bg-white/5 border border-gray-700/50 rounded-xl",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Aper√ßu Google Search:"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-blue-500 text-lg",children:l.meta_title||l.title||"Titre de l'article"}),e.jsxs("p",{className:"text-xs text-green-600",children:["votresite.com ‚Ä∫ blog ‚Ä∫ ",l.slug||"slug"]}),e.jsx("p",{className:"text-sm text-gray-400",children:l.meta_description||l.excerpt||"Description de l'article..."})]})]})]}),h==="publication"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Options de publication"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-semibold mb-2",children:"Statut"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>x({...l,status:"draft"}),className:`flex-1 p-4 rounded-xl border-2 transition-all ${l.status==="draft"?"border-yellow-500 bg-yellow-500/20":"border-gray-600 hover:border-yellow-500/50"}`,children:[e.jsx("p",{className:"text-white font-semibold",children:"Brouillon"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Visible uniquement par vous"})]}),e.jsxs("button",{type:"button",onClick:()=>x({...l,status:"published"}),className:`flex-1 p-4 rounded-xl border-2 transition-all ${l.status==="published"?"border-green-500 bg-green-500/20":"border-gray-600 hover:border-green-500/50"}`,children:[e.jsx("p",{className:"text-white font-semibold",children:"Publi√©"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Visible par tous"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-semibold mb-2",children:"Auteur"}),e.jsx("input",{type:"text",value:l.author,onChange:p=>x({...l,author:p.target.value}),className:"w-full px-4 py-3 bg-white/5 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-cyan-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-semibold mb-2",children:"Temps de lecture (minutes)"}),e.jsx("input",{type:"number",value:l.reading_time,onChange:p=>x({...l,reading_time:parseInt(p.target.value)||0}),min:"1",className:"w-full px-4 py-3 bg-white/5 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-cyan-500"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"‚ÑπÔ∏è Calcul√© automatiquement (200 mots/min). Vous pouvez le modifier manuellement."})]}),l.status==="published"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-semibold mb-2",children:"Date de publication"}),e.jsx("input",{type:"datetime-local",value:l.published_at?new Date(l.published_at).toISOString().slice(0,16):"",onChange:p=>x({...l,published_at:p.target.value?new Date(p.target.value).toISOString():""}),className:"w-full px-4 py-3 bg-white/5 border border-gray-600 rounded-xl text-white focus:outline-none focus:border-cyan-500"})]})]})]})]})};export{Mt as B,We as I,Ft as a,Rt as b,At as c,qt as d,Dt as e,Ot as f,tt as g,zt as h,Ut as i,we as u};

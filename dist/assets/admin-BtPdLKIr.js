import{j as t,u as k}from"./query-vendor-CeCaNT8N.js";import{a as w,u as D,c as B,R as I}from"./react-vendor-CEpth63u.js";import{A as O,M as W,L as U,E as K,a as Q,b as J,c as q,F as A,d as F,e as G,P as Z,B as X,f as R,N as V,T as ee,g as te}from"./ui-vendor-DtprUGyl.js";import{c as ne}from"./supabase-vendor-CSTczZmK.js";const re="https://aruoiqvgxoxhdlnerwww.supabase.co",ae="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFydW9pcXZneG94aGRsbmVyd3d3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMjUxODAsImV4cCI6MjA3NzYwMTE4MH0.iHVOUGmdNsw_cRJIf44MzxErsCxhICKlLHxyO6UUS_8",C=ne(re,ae),Ht=Object.freeze(Object.defineProperty({__proto__:null,supabase:C},Symbol.toStringTag,{value:"Module"})),se=w.createContext(void 0),Y=()=>{const e=w.useContext(se);if(e===void 0)throw new Error("useAuth doit Ãªtre utilisÃ© Ã  l'intÃ©rieur d'un AuthProvider");return e},Bt=()=>{const e=D(),n=B(),{login:r,isAuthenticated:a}=Y(),[s,c]=w.useState({email:"",password:""}),[i,o]=w.useState(!1),[u,m]=w.useState({}),[h,g]=w.useState(!1),[d,l]=w.useState(null);I.useEffect(()=>{if(a){const f=n.state?.from?.pathname||"/admin/dashboard";e(f,{replace:!0})}},[a,e,n]);const b=()=>{const f={};return s.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(f.email="Format d'email invalide"):f.email="L'email est requis",s.password?s.password.length<6&&(f.password="Le mot de passe doit contenir au moins 6 caractÃ¨res"):f.password="Le mot de passe est requis",m(f),Object.keys(f).length===0},N=async f=>{if(f.preventDefault(),l(null),!!b()){g(!0);try{const{error:v}=await r({email:s.email.trim().toLowerCase(),password:s.password});if(v){v.message.includes("Invalid login credentials")?l("Email ou mot de passe incorrect"):v.message.includes("Email not confirmed")?l("Veuillez confirmer votre email avant de vous connecter"):l(v.message);return}}catch(v){console.error("Erreur lors de la connexion:",v),l("Une erreur inattendue est survenue. Veuillez rÃ©essayer.")}finally{g(!1)}}},$=(f,v)=>{c(S=>({...S,[f]:v})),u[f]&&m(S=>({...S,[f]:void 0})),d&&l(null)};return t.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-[#0A0A0B] px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[t.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-cyan-500/10 rounded-full blur-3xl animate-pulse"}),t.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),t.jsxs("div",{className:"max-w-md w-full relative z-10",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-cyan-500 to-purple-500 rounded-2xl mb-6 shadow-lg shadow-cyan-500/25",children:t.jsx("span",{className:"text-2xl font-bold text-white",children:"lOS"})}),t.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent mb-2",children:"Administration"}),t.jsx("p",{className:"text-gray-400",children:"Connectez-vous pour accÃ©der au panneau d'administration"})]}),t.jsxs("div",{className:"bg-white/5 backdrop-blur-lg border border-gray-700/50 rounded-2xl p-8 shadow-xl",children:[d&&t.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/50 rounded-xl flex items-start gap-3",children:[t.jsx(O,{size:20,className:"text-red-400 flex-shrink-0 mt-0.5"}),t.jsx("div",{className:"flex-1",children:t.jsx("p",{className:"text-red-400 text-sm font-medium",children:d})})]}),t.jsxs("form",{onSubmit:N,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(W,{size:20,className:"text-gray-400"})}),t.jsx("input",{id:"email",type:"email",value:s.email,onChange:f=>$("email",f.target.value),className:`block w-full pl-10 pr-3 py-3 bg-white/5 border ${u.email?"border-red-500":"border-gray-600"} rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-300`,placeholder:"admin@example.com",disabled:h})]}),u.email&&t.jsxs("p",{className:"mt-2 text-sm text-red-400 flex items-center gap-1",children:[t.jsx("span",{className:"inline-block w-1 h-1 bg-red-400 rounded-full"}),u.email]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Mot de passe"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(U,{size:20,className:"text-gray-400"})}),t.jsx("input",{id:"password",type:i?"text":"password",value:s.password,onChange:f=>$("password",f.target.value),className:`block w-full pl-10 pr-12 py-3 bg-white/5 border ${u.password?"border-red-500":"border-gray-600"} rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-300`,placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",disabled:h}),t.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-cyan-400 transition-colors",disabled:h,children:i?t.jsx(K,{size:20}):t.jsx(Q,{size:20})})]}),u.password&&t.jsxs("p",{className:"mt-2 text-sm text-red-400 flex items-center gap-1",children:[t.jsx("span",{className:"inline-block w-1 h-1 bg-red-400 rounded-full"}),u.password]})]}),t.jsx("button",{type:"submit",disabled:h,className:`w-full flex items-center justify-center gap-3 py-3 px-4 rounded-xl font-semibold text-white transition-all duration-300 ${h?"bg-gray-600 cursor-not-allowed":"bg-gradient-to-r from-cyan-500 to-purple-500 hover:shadow-lg hover:shadow-cyan-500/25 hover:scale-105"}`,children:h?t.jsxs(t.Fragment,{children:[t.jsx(J,{size:20,className:"animate-spin"}),"Connexion en cours..."]}):"Se connecter"})]}),t.jsx("div",{className:"mt-6 text-center",children:t.jsx("p",{className:"text-gray-500 text-sm",children:"Interface d'administration sÃ©curisÃ©e"})})]}),t.jsx("div",{className:"mt-6 text-center",children:t.jsx("button",{onClick:()=>e("/"),className:"text-gray-400 hover:text-cyan-400 transition-colors text-sm",children:"â† Retour au site"})})]})]})},oe=async()=>{try{const e=async g=>{try{const{count:d,error:l}=await C.from(g).select("id",{count:"exact",head:!0});return l?(console.warn(`Table '${g}' n'existe pas encore:`,l.message),0):d||0}catch(d){return console.warn(`Erreur lors du comptage de '${g}':`,d),0}},[n,r,a,s,c,i,o,u,m,h]=await Promise.all([e("contact"),e("projects"),e("blog_posts"),e("services"),e("sectors"),e("navigation"),e("skills"),e("chatbot_knowledge"),e("blog_comments"),(async()=>{try{const{count:g,error:d}=await C.from("blog_comments").select("id",{count:"exact",head:!0}).eq("status","pending");return d?0:g||0}catch{return 0}})()]);return{contactsCount:n,projectsCount:r,blogPostsCount:a,servicesCount:s,sectorsCount:c,navigationItemsCount:i,skillsCount:o,chatbotKnowledgeCount:u,commentsCount:m,pendingCommentsCount:h}}catch(e){return console.error("Erreur lors de la rÃ©cupÃ©ration des statistiques:",e),{contactsCount:0,projectsCount:0,blogPostsCount:0,servicesCount:0,sectorsCount:0,navigationItemsCount:0,skillsCount:0,chatbotKnowledgeCount:0,commentsCount:0,pendingCommentsCount:0}}},ie=async(e=5)=>{try{const{data:n,error:r}=await C.from("contact").select("id, name, email, created_at").order("created_at",{ascending:!1}).limit(e);if(r)throw r;return n||[]}catch(n){return console.error("Erreur lors de la rÃ©cupÃ©ration des contacts rÃ©cents:",n),[]}},le=async(e=5)=>{try{const{data:n,error:r}=await C.from("projects").select("id, title, status, created_at").order("created_at",{ascending:!1}).limit(e);if(r)throw r;return n||[]}catch(n){return console.error("Erreur lors de la rÃ©cupÃ©ration des projets rÃ©cents:",n),[]}},ce=async(e=5)=>{try{const{data:n,error:r}=await C.from("blog_posts").select("id, title, status, published_at, created_at").order("created_at",{ascending:!1}).limit(e);if(r)throw r;return n||[]}catch(n){return console.error("Erreur lors de la rÃ©cupÃ©ration des articles rÃ©cents:",n),[]}},de=()=>k({queryKey:["dashboard","stats"],queryFn:oe,staleTime:1e3*60*5,refetchOnWindowFocus:!0}),ue=(e=5)=>k({queryKey:["dashboard","recent-contacts",e],queryFn:()=>ie(e),staleTime:1e3*60*2}),me=(e=5)=>k({queryKey:["dashboard","recent-projects",e],queryFn:()=>le(e),staleTime:1e3*60*2,enabled:!1}),he=(e=5)=>k({queryKey:["dashboard","recent-blog-posts",e],queryFn:()=>ce(e),staleTime:1e3*60*2,enabled:!1}),fe=({label:e,value:n,icon:r,color:a,bgColor:s,borderColor:c,trend:i,link:o,isLoading:u=!1})=>{const m=D(),h=()=>{o&&m(o)};return t.jsx("div",{onClick:h,className:`
        bg-white/5 border ${c} rounded-xl p-6 
        transition-all duration-300
        ${o?"cursor-pointer hover:scale-105 hover:shadow-lg hover:shadow-cyan-500/10":""}
      `,children:u?t.jsxs("div",{className:"animate-pulse",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:`w-12 h-12 ${s} rounded-lg`}),t.jsx("div",{className:"w-8 h-4 bg-gray-700 rounded"})]}),t.jsx("div",{className:"w-16 h-8 bg-gray-700 rounded mb-2"}),t.jsx("div",{className:"w-24 h-4 bg-gray-700 rounded"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:`w-12 h-12 ${s} rounded-lg flex items-center justify-center`,children:t.jsx(r,{size:24,className:"text-white"})}),i&&t.jsxs("div",{className:`flex items-center gap-1 text-sm font-medium ${i.isPositive?"text-green-400":"text-red-400"}`,children:[t.jsx("span",{children:i.isPositive?"â†‘":"â†“"}),t.jsxs("span",{children:[Math.abs(i.value),"%"]})]})]}),t.jsx("p",{className:"text-3xl font-bold text-white mb-1",children:typeof n=="number"?n.toLocaleString("fr-FR"):n}),t.jsx("p",{className:"text-sm text-gray-400",children:e})]})})},M=43200,L=1440,E=Symbol.for("constructDateFrom");function z(e,n){return typeof e=="function"?e(n):e&&typeof e=="object"&&E in e?e[E](n):e instanceof Date?new e.constructor(n):new Date(n)}function y(e,n){return z(e,e)}let ge={};function be(){return ge}function _(e){const n=y(e),r=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return r.setUTCFullYear(n.getFullYear()),+e-+r}function T(e,...n){const r=z.bind(null,e||n.find(a=>typeof a=="object"));return n.map(r)}function P(e,n){const r=+y(e)-+y(n);return r<0?-1:r>0?1:r}function pe(e){return z(e,Date.now())}function xe(e,n,r){const[a,s]=T(r?.in,e,n),c=a.getFullYear()-s.getFullYear(),i=a.getMonth()-s.getMonth();return c*12+i}function ve(e){return n=>{const a=(e?Math[e]:Math.trunc)(n);return a===0?0:a}}function ye(e,n){return+y(e)-+y(n)}function we(e,n){const r=y(e);return r.setHours(23,59,59,999),r}function je(e,n){const r=y(e),a=r.getMonth();return r.setFullYear(r.getFullYear(),a+1,0),r.setHours(23,59,59,999),r}function Ce(e,n){const r=y(e);return+we(r)==+je(r)}function Ne(e,n,r){const[a,s,c]=T(r?.in,e,e,n),i=P(s,c),o=Math.abs(xe(s,c));if(o<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-i*o);let u=P(s,c)===-i;Ce(a)&&o===1&&P(a,c)===1&&(u=!1);const m=i*(o-+u);return m===0?0:m}function Me(e,n,r){const a=ye(e,n)/1e3;return ve(r?.roundingMethod)(a)}const Pe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ke=(e,n,r)=>{let a;const s=Pe[e];return typeof s=="string"?a=s:n===1?a=s.one:a=s.other.replace("{{count}}",n.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function j(e){return(n={})=>{const r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const De={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Se={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},We={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ae={date:j({formats:De,defaultWidth:"full"}),time:j({formats:Se,defaultWidth:"full"}),dateTime:j({formats:We,defaultWidth:"full"})},Fe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ze=(e,n,r,a)=>Fe[e];function p(e){return(n,r)=>{const a=r?.context?String(r.context):"standalone";let s;if(a==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,o=r?.width?String(r.width):i;s=e.formattingValues[o]||e.formattingValues[i]}else{const i=e.defaultWidth,o=r?.width?String(r.width):e.defaultWidth;s=e.values[o]||e.values[i]}const c=e.argumentCallback?e.argumentCallback(n):n;return s[c]}}const Te={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Le={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ee={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Oe=(e,n)=>{const r=Number(e),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Je={ordinalNumber:Oe,era:p({values:Te,defaultWidth:"wide"}),quarter:p({values:$e,defaultWidth:"wide",argumentCallback:e=>e-1}),month:p({values:Le,defaultWidth:"wide"}),day:p({values:Ee,defaultWidth:"wide"}),dayPeriod:p({values:_e,defaultWidth:"wide",formattingValues:Ie,defaultFormattingWidth:"wide"})};function x(e){return(n,r={})=>{const a=r.width,s=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],c=n.match(s);if(!c)return null;const i=c[0],o=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(o)?Xe(o,g=>g.test(i)):qe(o,g=>g.test(i));let m;m=e.valueCallback?e.valueCallback(u):u,m=r.valueCallback?r.valueCallback(m):m;const h=n.slice(i.length);return{value:m,rest:h}}}function qe(e,n){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n(e[r]))return r}function Xe(e,n){for(let r=0;r<e.length;r++)if(n(e[r]))return r}function H(e){return(n,r={})=>{const a=n.match(e.matchPattern);if(!a)return null;const s=a[0],c=n.match(e.parsePattern);if(!c)return null;let i=e.valueCallback?e.valueCallback(c[0]):c[0];i=r.valueCallback?r.valueCallback(i):i;const o=n.slice(s.length);return{value:i,rest:o}}}const Re=/^(\d+)(th|st|nd|rd)?/i,Ve=/\d+/i,Ye={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},He={any:[/^b/i,/^(a|c)/i]},Be={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ue={any:[/1/i,/2/i,/3/i,/4/i]},Ke={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Qe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ge={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ze={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},et={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},nt={ordinalNumber:H({matchPattern:Re,parsePattern:Ve,valueCallback:e=>parseInt(e,10)}),era:x({matchPatterns:Ye,defaultMatchWidth:"wide",parsePatterns:He,defaultParseWidth:"any"}),quarter:x({matchPatterns:Be,defaultMatchWidth:"wide",parsePatterns:Ue,defaultParseWidth:"any",valueCallback:e=>e+1}),month:x({matchPatterns:Ke,defaultMatchWidth:"wide",parsePatterns:Qe,defaultParseWidth:"any"}),day:x({matchPatterns:Ge,defaultMatchWidth:"wide",parsePatterns:Ze,defaultParseWidth:"any"}),dayPeriod:x({matchPatterns:et,defaultMatchWidth:"any",parsePatterns:tt,defaultParseWidth:"any"})},rt={code:"en-US",formatDistance:ke,formatLong:Ae,formatRelative:ze,localize:Je,match:nt,options:{weekStartsOn:0,firstWeekContainsDate:1}};function at(e,n,r){const a=be(),s=r?.locale??a.locale??rt,c=2520,i=P(e,n);if(isNaN(i))throw new RangeError("Invalid time value");const o=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:i}),[u,m]=T(r?.in,...i>0?[n,e]:[e,n]),h=Me(m,u),g=(_(m)-_(u))/1e3,d=Math.round((h-g)/60);let l;if(d<2)return r?.includeSeconds?h<5?s.formatDistance("lessThanXSeconds",5,o):h<10?s.formatDistance("lessThanXSeconds",10,o):h<20?s.formatDistance("lessThanXSeconds",20,o):h<40?s.formatDistance("halfAMinute",0,o):h<60?s.formatDistance("lessThanXMinutes",1,o):s.formatDistance("xMinutes",1,o):d===0?s.formatDistance("lessThanXMinutes",1,o):s.formatDistance("xMinutes",d,o);if(d<45)return s.formatDistance("xMinutes",d,o);if(d<90)return s.formatDistance("aboutXHours",1,o);if(d<L){const b=Math.round(d/60);return s.formatDistance("aboutXHours",b,o)}else{if(d<c)return s.formatDistance("xDays",1,o);if(d<M){const b=Math.round(d/L);return s.formatDistance("xDays",b,o)}else if(d<M*2)return l=Math.round(d/M),s.formatDistance("aboutXMonths",l,o)}if(l=Ne(m,u),l<12){const b=Math.round(d/M);return s.formatDistance("xMonths",b,o)}else{const b=l%12,N=Math.trunc(l/12);return b<3?s.formatDistance("aboutXYears",N,o):b<9?s.formatDistance("overXYears",N,o):s.formatDistance("almostXYears",N+1,o)}}function st(e,n){return at(e,pe(e),n)}const ot={lessThanXSeconds:{one:"moins dâ€™une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dâ€™une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dâ€™un an",other:"plus de {{count}} ans"},almostXYears:{one:"presquâ€™un an",other:"presque {{count}} ans"}},it=(e,n,r)=>{let a;const s=ot[e];return typeof s=="string"?a=s:n===1?a=s.one:a=s.other.replace("{{count}}",String(n)),r?.addSuffix?r.comparison&&r.comparison>0?"dans "+a:"il y a "+a:a},lt={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},ct={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},dt={full:"{{date}} 'Ã ' {{time}}",long:"{{date}} 'Ã ' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ut={date:j({formats:lt,defaultWidth:"full"}),time:j({formats:ct,defaultWidth:"full"}),dateTime:j({formats:dt,defaultWidth:"full"})},mt={lastWeek:"eeee 'dernier Ã ' p",yesterday:"'hier Ã ' p",today:"'aujourdâ€™hui Ã ' p",tomorrow:"'demain Ã ' p'",nextWeek:"eeee 'prochain Ã ' p",other:"P"},ht=(e,n,r,a)=>mt[e],ft={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant JÃ©sus-Christ","aprÃ¨s JÃ©sus-Christ"]},gt={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2Ã¨me trim.","3Ã¨me trim.","4Ã¨me trim."],wide:["1er trimestre","2Ã¨me trimestre","3Ã¨me trimestre","4Ã¨me trimestre"]},bt={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fÃ©vr.","mars","avr.","mai","juin","juil.","aoÃ»t","sept.","oct.","nov.","dÃ©c."],wide:["janvier","fÃ©vrier","mars","avril","mai","juin","juillet","aoÃ»t","septembre","octobre","novembre","dÃ©cembre"]},pt={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},xt={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprÃ¨s-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de lâ€™aprÃ¨s-midi",evening:"du soir",night:"du matin"}},vt=(e,n)=>{const r=Number(e),a=n?.unit;if(r===0)return"0";const s=["year","week","hour","minute","second"];let c;return r===1?c=a&&s.includes(a)?"Ã¨re":"er":c="Ã¨me",r+c},yt=["MMM","MMMM"],wt={preprocessor:(e,n)=>e.getDate()===1||!n.some(a=>a.isToken&&yt.includes(a.value))?n:n.map(a=>a.isToken&&a.value==="do"?{isToken:!0,value:"d"}:a),ordinalNumber:vt,era:p({values:ft,defaultWidth:"wide"}),quarter:p({values:gt,defaultWidth:"wide",argumentCallback:e=>e-1}),month:p({values:bt,defaultWidth:"wide"}),day:p({values:pt,defaultWidth:"wide"}),dayPeriod:p({values:xt,defaultWidth:"wide"})},jt=/^(\d+)(iÃ¨me|Ã¨re|Ã¨me|er|e)?/i,Ct=/\d+/i,Nt={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant JÃ©sus-Christ|aprÃ¨s JÃ©sus-Christ)/i},Mt={any:[/^av/i,/^ap/i]},Pt={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|Ã¨me|e)? trim\.?/i,wide:/^[1234](er|Ã¨me|e)? trimestre/i},kt={any:[/1/i,/2/i,/3/i,/4/i]},Dt={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fÃ©vr|mars|avr|mai|juin|juill|juil|aoÃ»t|sept|oct|nov|dÃ©c)\.?/i,wide:/^(janvier|fÃ©vrier|mars|avril|mai|juin|juillet|aoÃ»t|septembre|octobre|novembre|dÃ©cembre)/i},St={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},Wt={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},At={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},Ft={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprÃ¨s[-\s]midi|du soir|de la nuit)/i},zt={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},Tt={ordinalNumber:H({matchPattern:jt,parsePattern:Ct,valueCallback:e=>parseInt(e)}),era:x({matchPatterns:Nt,defaultMatchWidth:"wide",parsePatterns:Mt,defaultParseWidth:"any"}),quarter:x({matchPatterns:Pt,defaultMatchWidth:"wide",parsePatterns:kt,defaultParseWidth:"any",valueCallback:e=>e+1}),month:x({matchPatterns:Dt,defaultMatchWidth:"wide",parsePatterns:St,defaultParseWidth:"any"}),day:x({matchPatterns:Wt,defaultMatchWidth:"wide",parsePatterns:At,defaultParseWidth:"any"}),dayPeriod:x({matchPatterns:Ft,defaultMatchWidth:"any",parsePatterns:zt,defaultParseWidth:"any"})},$t={code:"fr",formatDistance:it,formatLong:ut,formatRelative:ht,localize:wt,match:Tt,options:{weekStartsOn:1,firstWeekContainsDate:4}},Lt={contact:{icon:W,color:"text-cyan-400",bgColor:"bg-cyan-500/10",borderColor:"border-cyan-500/30"},project:{icon:F,color:"text-purple-400",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/30"},blog:{icon:A,color:"text-green-400",bgColor:"bg-green-500/10",borderColor:"border-green-500/30"},comment:{icon:q,color:"text-yellow-400",bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/30"}},Et=({items:e,isLoading:n=!1})=>{const r=D();return n?t.jsxs("div",{className:"bg-white/5 border border-gray-700/50 rounded-xl p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"ActivitÃ© rÃ©cente"}),t.jsx("div",{className:"space-y-4",children:[...Array(5)].map((a,s)=>t.jsxs("div",{className:"animate-pulse flex items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-lg"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"w-32 h-4 bg-gray-700 rounded mb-2"}),t.jsx("div",{className:"w-48 h-3 bg-gray-700 rounded"})]})]},s))})]}):e.length===0?t.jsxs("div",{className:"bg-white/5 border border-gray-700/50 rounded-xl p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"ActivitÃ© rÃ©cente"}),t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-gray-400",children:"Aucune activitÃ© rÃ©cente"}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Les derniÃ¨res modifications apparaÃ®tront ici"})]})]}):t.jsxs("div",{className:"bg-white/5 border border-gray-700/50 rounded-xl p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"ActivitÃ© rÃ©cente"}),t.jsx("div",{className:"space-y-3",children:e.map(a=>{const s=Lt[a.type],c=s.icon;return t.jsxs("div",{onClick:()=>r(a.link),className:`
                flex items-center gap-4 p-3 rounded-lg border ${s.borderColor}
                ${s.bgColor} cursor-pointer hover:scale-[1.02] transition-all
              `,children:[t.jsx("div",{className:`flex-shrink-0 w-10 h-10 ${s.bgColor} rounded-lg flex items-center justify-center`,children:t.jsx(c,{size:20,className:s.color})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-white font-medium truncate",children:a.title}),a.subtitle&&t.jsx("p",{className:"text-sm text-gray-400 truncate",children:a.subtitle}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:st(new Date(a.timestamp),{addSuffix:!0,locale:$t})})]}),t.jsx(G,{size:16,className:"text-gray-500 flex-shrink-0"})]},a.id)})})]})},_t=[{label:"Nouvel article",icon:A,link:"/admin/blog/create",color:"from-green-500 to-emerald-500",description:"RÃ©diger un article de blog"},{label:"Nouveau projet",icon:F,link:"/admin/projects/create",color:"from-purple-500 to-pink-500",description:"Ajouter un projet portfolio"},{label:"Nouveau service",icon:X,link:"/admin/services/create",color:"from-cyan-500 to-blue-500",description:"CrÃ©er un service"},{label:"Nouveau secteur",icon:R,link:"/admin/sectors/create",color:"from-orange-500 to-red-500",description:"Ajouter un secteur"},{label:"Navigation",icon:V,link:"/admin/navigation/create",color:"from-yellow-500 to-amber-500",description:"Ajouter un lien de navigation"}],It=()=>{const e=D();return t.jsxs("div",{className:"bg-white/5 border border-gray-700/50 rounded-xl p-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[t.jsx(Z,{size:20,className:"text-cyan-400"}),"Actions rapides"]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3",children:_t.map((n,r)=>{const a=n.icon;return t.jsx("button",{onClick:()=>e(n.link),className:`
                p-4 rounded-xl border border-gray-700/50 
                bg-gradient-to-br ${n.color} bg-opacity-10
                hover:scale-105 transition-all duration-300
                text-left group
              `,children:t.jsxs("div",{className:"flex flex-col items-start gap-2",children:[t.jsx("div",{className:"w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center group-hover:bg-white/20 transition-colors",children:t.jsx(a,{size:20,className:"text-white"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-medium text-sm",children:n.label}),t.jsx("p",{className:"text-gray-400 text-xs mt-0.5",children:n.description})]})]})},r)})})]})},Ot={sm:24,md:40,lg:56},Jt=({size:e="md",text:n})=>t.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[t.jsx(J,{size:Ot[e],className:"animate-spin text-cyan-400"}),n&&t.jsx("p",{className:"text-gray-400 text-sm",children:n})]}),qt=({title:e="Une erreur est survenue",message:n,onRetry:r})=>t.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 rounded-xl p-6 text-center",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-red-500/20 rounded-full mb-4",children:t.jsx(O,{size:24,className:"text-red-400"})}),t.jsx("h3",{className:"text-lg font-semibold text-red-400 mb-2",children:e}),t.jsx("p",{className:"text-gray-300 mb-4",children:n}),r&&t.jsx("button",{onClick:r,className:"px-4 py-2 bg-red-500/20 border border-red-500/50 rounded-lg text-red-400 hover:bg-red-500/30 transition-colors",children:"RÃ©essayer"})]}),Ut=()=>{const{user:e}=Y(),{data:n,isLoading:r,error:a}=de(),{data:s,isLoading:c}=ue(3),{data:i,isLoading:o}=me(3),{data:u,isLoading:m}=he(3),h=I.useMemo(()=>{const d=[];return s&&s.forEach(l=>{d.push({id:l.id,type:"contact",title:l.name,subtitle:l.email,timestamp:l.created_at,link:"/admin/contacts"})}),i&&i.forEach(l=>{d.push({id:l.id,type:"project",title:l.title,subtitle:`Statut: ${l.status}`,timestamp:l.created_at,link:"/admin/projects"})}),u&&u.forEach(l=>{d.push({id:l.id,type:"blog",title:l.title,subtitle:`Statut: ${l.status}`,timestamp:l.published_at||l.created_at,link:"/admin/blog"})}),d.sort((l,b)=>new Date(b.timestamp).getTime()-new Date(l.timestamp).getTime()).slice(0,5)},[s,i,u]),g=n?[{label:"Contacts",value:n.contactsCount,icon:W,color:"from-cyan-500 to-blue-500",bgColor:"bg-cyan-500/10",borderColor:"border-cyan-500/50",link:"/admin/contacts"},{label:"Projets",value:n.projectsCount,icon:F,color:"from-purple-500 to-pink-500",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/50",link:"/admin/projects"},{label:"Articles",value:n.blogPostsCount,icon:A,color:"from-green-500 to-emerald-500",bgColor:"bg-green-500/10",borderColor:"border-green-500/50",link:"/admin/blog"},{label:"Commentaires",value:n.commentsCount,badge:n.pendingCommentsCount>0?n.pendingCommentsCount:void 0,icon:q,color:"from-yellow-500 to-orange-500",bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/50",link:"/admin/comments"},{label:"Services",value:n.servicesCount,icon:X,color:"from-orange-500 to-red-500",bgColor:"bg-orange-500/10",borderColor:"border-orange-500/50",link:"/admin/services"},{label:"Secteurs",value:n.sectorsCount,icon:R,color:"from-pink-500 to-rose-500",bgColor:"bg-pink-500/10",borderColor:"border-pink-500/50",link:"/admin/sectors"},{label:"Navigation",value:n.navigationItemsCount,icon:V,color:"from-yellow-500 to-amber-500",bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/50",link:"/admin/navigation"},{label:"CompÃ©tences",value:n.skillsCount,icon:ee,color:"from-indigo-500 to-purple-500",bgColor:"bg-indigo-500/10",borderColor:"border-indigo-500/50",link:"/admin/skills"},{label:"Chatbot KB",value:n.chatbotKnowledgeCount,icon:te,color:"from-teal-500 to-cyan-500",bgColor:"bg-teal-500/10",borderColor:"border-teal-500/50",link:"/admin/chatbot"}]:[];return a?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent mb-2",children:"Dashboard"}),t.jsxs("p",{className:"text-gray-400",children:["Bienvenue, ",e?.email?.split("@")[0]||"Admin"]})]}),t.jsx(qt,{title:"Erreur de chargement",message:"Impossible de charger les statistiques. VÃ©rifiez votre connexion."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent mb-2",children:"Dashboard"}),t.jsxs("p",{className:"text-gray-400",children:["Bienvenue, ",e?.email?.split("@")[0]||"Admin"," ! Voici un aperÃ§u de votre activitÃ©."]})]}),r?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(Jt,{size:"lg",text:"Chargement des statistiques..."})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:g.map((d,l)=>t.jsx(fe,{...d},l))}),t.jsx(It,{}),t.jsx(Et,{items:h,isLoading:c||o||m}),n&&n.contactsCount===0&&n.projectsCount===0&&n.blogPostsCount===0&&t.jsx("div",{className:"bg-blue-500/10 border border-blue-500/50 rounded-xl p-6",children:t.jsx("div",{className:"flex items-start gap-4",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-blue-400 font-semibold mb-2",children:"ðŸŽ‰ Bienvenue dans votre interface admin !"}),t.jsx("p",{className:"text-gray-300 text-sm mb-3",children:"Votre dashboard est prÃªt. Commencez par crÃ©er du contenu en utilisant les actions rapides ci-dessus ou en naviguant dans le menu."}),t.jsxs("ul",{className:"text-gray-400 text-sm space-y-1",children:[t.jsx("li",{children:"â†’ CrÃ©ez vos premiers services"}),t.jsx("li",{children:"â†’ Ajoutez des projets Ã  votre portfolio"}),t.jsx("li",{children:"â†’ RÃ©digez des articles de blog"}),t.jsx("li",{children:"â†’ Configurez la navigation"})]})]})})})]})};export{Ut as D,Bt as L,Ht as a,C as s};
